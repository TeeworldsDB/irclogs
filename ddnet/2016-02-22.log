15:29 < o_be_one> hello
15:30 < o_be_one> deen: seems to got error from server side, it should be fixed now
18:48 < ohshiiiit> hi all
18:49 < ohshiiiit> someone can help me? i compile server, but idk how to change gametype from DDRaceNetwork to DDRace
18:50 < ohshiiiit> i try to iclude gamemode.h
18:50 < ohshiiiit> but its not work
18:54 < ohshiiiit> someone... :o
18:55 < ohshiiiit> or all here play teeworlds right now? :o
18:57 < fstd_> ohshiiiit: why would you try including stuff in order to change the game type?
18:57 < ohshiiiit> because my server not a part of ddrace network
18:57 < ohshiiiit> :o
18:57 < fstd_> a more promising attempt would be to search the source files for the string "DDRaceNetwork"
18:58 < ohshiiiit> oh, im soo stupid...
18:59 < ohshiiiit> now i see where is my error. ty fstd_
18:59 < ohshiiiit> btw
19:00 < ohshiiiit> lol, new problem. when i change gametype to ddrace, i can login to admin but any commands dont work
19:01 < ohshiiiit> fstd_: where is my error? ;o
19:01 < fstd_> be more specific about what 'any commands dont work' means
19:01 < fstd_> i forgot my crystal ball at work
19:02 < ohshiiiit> for example broadcast
19:02 < ohshiiiit> i can login like a admin, but its only one can i do
19:02 < fstd_> and that does work when you change the game type back to DDRaceNetwork?
19:02 < ohshiiiit> yap
19:03 < fstd_> how do you know it's the only command you can do?
19:03 < fstd_> do you mean it's the only command that is auto-completed?
19:03 < ohshiiiit> nope. how to explain...
19:03 < ohshiiiit> i can login to admin console
19:04 < ohshiiiit> and can run any command only onece. after this, console not work
19:05 < fstd_> hm, no idea what could cause that
19:05 < ohshiiiit> .-.
19:05 < fstd_> could take a look if you give me server address and PW in PM, but it probably won't be obvious
19:06 < ohshiiiit> oh 1 sec
19:08 < ohshiiiit> fstd_: send to pm
19:08 < fstd_> mhm, just having my typical map download problems, one sec
19:09 < ohshiiiit> :o
19:09 < ohshiiiit> hope is not my error...
19:09 < fstd_> no, i have it with all ddnet servers, but couldn't be bothered to track it down yet
19:09 < fstd_> probably some problem on my end, but i can work around it
19:19 < ohshiiiit> woops
19:22 < ohshiiiit> fstd_: on sec :o
19:24 < ohshiiiit> fstd_: done
19:30 < ohshiiiit> fstd_: one question
19:31 < ohshiiiit> compile a normal server
19:31 < ohshiiiit> or debug
19:31 < ohshiiiit> :o
19:31 < fstd_> for debugging?  make a guess :)
19:31 < ohshiiiit> ok. time to try some new shit...
19:32 < fstd_> feel free to ask if you run into issues you can't solve by a quick google run
19:33 < ohshiiiit> wtf is test_cmds in config?
19:34 < ohshiiiit> ah, > Turns testing commands aka cheats on/off
19:34 < ohshiiiit> ok
19:39 < fstd_> does the rcon console going silent (can still type, does still auto-suggest but commands don't generate responses) after the first command (which does give a response) ring a bell for anyone?
19:39 <@heinrich5991> no
19:39 <@heinrich5991> can you observe the server console
19:39 <@heinrich5991> whether the commands are still received
19:39 < fstd_> according to ohshiiiit, no
19:39 <@EastByte> the problem lies in ddnet's incompability with ddnet server using invalid gametype names
19:39 < fstd_> ohshiiiit: or did the commands show up there, just not the responses?
19:40 < ohshiiiit> in server console nothing
19:40 <@EastByte> there are multiple things that won't work anymore
19:40 < fstd_> EastByte: ah, so server and client have to agree?
19:40 <@EastByte> not sure about that
19:41 < ohshiiiit> maybe its for protect console?
19:41 < ohshiiiit> from attack
19:41 <@EastByte> but afaik ddnet uses a special way to validate rcon commands
19:41 < fstd_> ohshiiiit: can you bring up the server again?
19:41 < ohshiiiit> debug version?
19:41 < ohshiiiit> or normal
19:42 < fstd_> doesn't matter, but it should have the 'wrong' game type
19:42 < fstd_> i.e. DDRacess or what it was
19:42 < ohshiiiit> up
19:44 < ohshiiiit> whoah? :o
19:47 <@deen> ohshiiiit: i didn't read everything, but there is a hacked-on-top security when you have DDNet client and DDNet server, to prevent ip spoofing to send rcon commands
19:47 < ohshiiiit> deen: oh
19:47 < ohshiiiit> so
19:47 < ohshiiiit> its posible to fix it?
19:47 <@deen> and I think that stops working when you rename the server type, because server knows it gets a DDNet client, so it enables the security. But client doesn't know it's a DDNet server, so no security and everything breaks
19:47 <@deen> ohshiiiit: did you rename your server type?
19:47 <@deen> there are a few things you could do:
19:47 < ohshiiiit> yap, only game_type
19:48 < ohshiiiit> not test_
19:48 <@deen> 1. Rename your server type back to DDraceNetwork
19:48 <@deen> 2. Compile your own client with support for administrating your game type
19:48 <@deen> 3. Make a PR to DDNet client to add your game type as supported
19:48 <@deen> 4. Come up with a better security protocol
19:48 < ohshiiiit> O_o
19:48 <@deen> 5. Disable the security thing altogether
19:49 < fstd_> the "security" does let the first command through, after authentication
19:49 < fstd_> i.e. it's completely ineffective because one can re-connect to get a new first command
19:49 <@deen> right, and then it basically logs you out and you need password again for each command
19:49 <@deen> but hm, it probably should not let the first command through, right
19:49 < fstd_> ah, i see
19:50 <@EastByte> it's not needed anymore
19:50 <@deen> EastByte: that's even better, so we can just remove it?
19:50 <@EastByte> yes
19:50 <@deen> so 4. was implemented already, great^^
19:50 < ohshiiiit> i help to ddnet?
19:50 < ohshiiiit> :o
19:51 <@deen> EastByte: you want to remove it or should I?
19:51 <@EastByte> deen: I'm not at home :p
19:51 <@EastByte> ohshiiiit: you should keep the original game type name, otherwise a few things will not work (with the ddnet client)
19:52 <@EastByte> it doesn't matter whether it's part of ddnet or not
19:54 < ddnet-commits> [ddnet] def- pushed 1 new commit to master: https://git.io/v2Y3O
19:54 < ddnet-commits> ddnet/master 91df0a2 def: Remove hacky security against rcon spoofing because we have a better one now
19:56 < ddnet-commits> [ddnet] def- pushed 1 new commit to master: https://git.io/v2Y3K
19:56 < ddnet-commits> ddnet/master a93e771 def: Remove hacky security against rcon spoofing because we have a better one now (client-side)
19:56 < ohshiiiit> also, i have some quetion not about server compile. its posible to create anicheat for teeworlds? or no, because its "open source"?
19:57 <@deen> ohshiiiit: open source surely makes it easier to write bots and other cheats, but every game has them. And anticheat is always impossible in principle
19:58 < ohshiiiit> .-.
19:58 < ohshiiiit> so much people use cheats
19:58 <@deen> You can only make it harder and harder by enforcing binaries, scanning the system while the game runs etc
19:58 <@EastByte> `it's a cat and mouse game` :D
19:58 <@deen> Yeah, last resort is to build a general AI robot that sits in front of the computer and plays for you
19:59 < ohshiiiit> maybe create closed source ddnet?
19:59 <@deen> nope
19:59 < ohshiiiit> :o
19:59 < o_be_one> was a challenge on Twitch i think, a robot playing Mario or something like that
19:59 < o_be_one> was funny :D
19:59 <@deen> Then the anticheat would look at the webcam to analyze whether it's a human sitting there
20:00 < o_be_one> ah yes it was ROB from Nintendo :D !
20:00 <@deen> so the robots will become more and more humanoid
20:00 < ohshiiiit> oh yap
20:00 < ohshiiiit> and use super hook
20:00 < ohshiiiit> with 100000 hooks per sec
20:00 <@deen> for the end of this story read Isaac Asimov
20:29 < Chained> didn't know about the extra security features on the ddnet client, until now. pretty nice idea, since i suffered once from ip spoofing attacks ;)
21:11 < ParANormaL_> good evening :)
21:13 < ParANormaL_> sorry to annoy you again with this topic, but i still have troubles with the ddnet sql-server and i'd like to know which mysql version the offical servers are running
21:14 <@deen> ParANormaL_: we run mariadb actually
21:14 <@deen> switched to it from mysql long ago
21:14 <@deen> on some servers mariadb 5.5, on others 10
21:14 <@deen> but we should be compatible with mysql as well
21:14 < ParANormaL_> thanks, i'll try it :)
21:14 <@deen> afaik mariadb 5.5 and mysql 5.5 are still quite close
21:16 < ParANormaL_> last time i came up with this topic we found the ddnet server to be incompatible with the mysql version our server is running
21:24 <@deen> oh, that sounds strange
21:24 <@deen> and should be documented or fixed
21:39 < ParANormaL_> the problem is i dont know whether it's just our server or a general bug
21:47 < ParANormaL_> ok, i'm clueless. even after switching to mariadb the server doesnt connect to sql using the specified user&password
21:48 <@deen> ParANormaL_: ah, it's using root user
21:48 <@deen> wasn't that the issue? or someone else had it
21:48 <@deen> but I can't reproduce because on our official servers it works
21:48 < ParANormaL_> yes, that's the issue
21:49 <@deen> so I guess some system mysql client library (libmysqlclient or the c++ connector) is wrong version or has bugs
21:49 < ParANormaL_> how can i exchange them?
21:49 <@deen> depends on your distribution
21:50 <@deen> for starters you can check config.lua, if it says "mysql.use_mysqlconfig = true"
21:50 <@deen> (or false)
21:50 <@deen> then we know if it uses the system libs or the ones we package
21:51 < ParANormaL_> distribution is Ubuntu 15.10 and the config says "mysql.use_mysqlconfig = false"
21:52 <@deen> ok, then it uses the bundled libs, try "apt-get install libmariadbclient-dev libmysqlcppconn-dev"
21:52 < o_be_one> hey hello ParANormaL_ :)
21:52 < ParANormaL_> hey there o_be_one!
21:52 < o_be_one> how are you ?
21:52 <@deen> and remove the config.lua, then bam should recreate it (or run "bam config" I guess)
21:53 <@deen> that sounds bad btw if our bundled libs are causing problems
21:54 < ParANormaL_> well, im fine, but somehow stressed, what about you?
21:55 < ParANormaL_> isn't there a param to install all requiered dependencies?
21:56 <@deen> only what's down here: https://github.com/ddnet/ddnet#building
21:56 < o_be_one> i'm a little sick but i'm almost ok :). Thank you
21:59 < ParANormaL_> "libmariadbclient-dev : Hängt ab von: libmariadbclient18 (>= 5.5.48+maria-1~trusty) soll aber nicht installiert werden" that's why i asked about the dependencies
22:00 < ParANormaL_> get well soon o_be_one
22:01 < o_be_one> i hope :)
22:03 <@deen> no idea how to fix debian/ubuntu installation problems :/
22:03 <@deen> I sometimes see them and just google
22:03 < o_be_one> whats the proble
22:04 < ParANormaL_> somehow libmysqlclient18 is marked as manually installed and therefore causes problems
22:06 < o_be_one> deen: why did you choose MariaDB ? for better master/master use ?
22:06 < o_be_one> ParANormaL_: when you do dpkg -l ?
22:07 <@deen> o_be_one: Mostly politics, I dislike Oracle and the open source community seems to be going with MariaDB
22:07 < o_be_one> ok i see
22:08 < ParANormaL_> o_be_one what about dpkg -l? it's listed there, if you asked this
22:09 <@deen> I would try removing libmariadbclient18
22:10 < ParANormaL_> it's not even installed
22:10 < o_be_one> ParANormaL_: you use mariadb or mysql ?
22:10 < ParANormaL_> i just switched to mariadb
22:10 < o_be_one> ok
22:10 < o_be_one> is it working with the cli client ?
22:11 < ParANormaL_> what do you mean?
22:11 < o_be_one> i dont work with mariadb actually, but i assume it's quite the same use
22:11 <@deen> oh, then remove libmysqlclient18
22:11 < o_be_one> well when you have mysql-server you have, most of the time, mysql-client
22:11 < o_be_one> so you can mysql -u root -p
22:11 < o_be_one> (by default it will try localhost)
22:12 < ParANormaL_> ah, yes, this works
22:12 < o_be_one> you are able to log in your mariadb server ?
22:12 < o_be_one> show databases etc. ?
22:12 < ParANormaL_> yes
22:12 < o_be_one> ok so from the server side it seems to be ok. What happend when you try to connect DDNet with MariaDB ? What is the log error ?
22:13 < o_be_one> deen: if there is mysqlclient + mariadbclient, ddnet could be lost ?
22:13 <@deen> lost?
22:13 < o_be_one> a problem could happen ?
22:13 <@deen> don't think so, but who knows
22:13 < o_be_one> cause they cant start together ...
22:13 < ParANormaL_> [16-02-22 22:13:20][SQL]: MySQL Error: Access denied for user 'root'@'localhost' [16-02-22 22:13:20][SQL]: ERROR: SQL connection failed
22:13 < ParANormaL_> but in the config i dont use root
22:14 < ParANormaL_> it just seems to ignore the config
22:14 < o_be_one> oh ... Did you followed the official MySQL config from DDNet available on github ?
22:14 <@deen> o_be_one: it's a bug in the mysqlclient lib, we think
22:14 <@deen> it's not the first time we hear about the user being ignored
22:14 < o_be_one> ok thats why you suggest to drop mysqlclient
22:15 <@deen> no, i suggest removing mysqlclient so he can install mariadbclient
22:15 < o_be_one> but sql connection failed = no answers, i think
22:15 <@deen> yeah, but sql lib broken = wrong username
22:15 < o_be_one> ParANormaL_: dpkg -l | grep mysql
22:15 < ParANormaL_> i dropped libmysqlclient, but nothing changed.. and i still cant install libmariadbclient-dev libmysqlcppconn-dev
22:15 < o_be_one> ok i understand
22:16 <@deen> ParANormaL_: very strange, you could try googling for the error i guess
22:16 < o_be_one> ParANormaL_: even with the dpkg -l line
22:16 < o_be_one> you have no mysql with dpkg -l | grep mysql ?
22:16 < ParANormaL_> dpkg -l | grep mysql -> http://pastebin.com/iUNqPqJM
22:17 < ParANormaL_> even though apt says there is no libmysqlclient18 installed
22:17 < o_be_one> "A status of 'rc' signifies that the package has been removed, but that the configuration files remain
22:17 < o_be_one> you missed the --purge when removing i think
22:18 < o_be_one> and mysqlcomong are installed, mariadb needs it ? i check
22:19 < o_be_one> no it doenst needs mysql-commong
22:19 < o_be_one> just mariadb-common
22:20 < o_be_one> what is the name of the mariadb client command ?
22:20 < o_be_one> mariadb -u root -p ?
22:20 < o_be_one> and where the alias mysql -u root -p go ?
22:21 < o_be_one> maybe you can try : whereis mysql
22:21 < o_be_one> deen: ddnet uses mysql or it can detects if its mariadb command to use (or maybe we can tell in the conf ?)
22:22 <@deen> mariadb is a drop-in replacement for mysql, no need for any configuration or changes
22:23 < ParANormaL_> i just removed anything mysql/mariadb related and installed mariadb again
22:24 < ParANormaL_> but after installing mariadb libmysqlclient18 is also installed
22:25 <@deen> eh, weird stuff
22:25 <@deen> can you just install the c++ connector?
22:27 < ParANormaL_> i can try, but i dont know how
22:28 < o_be_one> apt-cache depends mariadb-server-5.5 | grep client
22:29 < o_be_one>   Dépend: mariadb-client-5.5
22:29 < o_be_one> you mustn't have libmysqlclient ...
22:29 < o_be_one> mmh im wrong
22:29 < o_be_one> with mariadb-client it comes
22:30 < o_be_one> oh no, it doenst comes with
22:30 < o_be_one> (im tired and sick remember :p)
22:30 < o_be_one> it get replace by mariadb-client
22:31 < o_be_one> Recommande: libdbd-mysql-perl
22:32 < o_be_one> ok lets install a mariadb serv it will be faster
22:32 < o_be_one> creating new instance
22:40 < o_be_one> as we can see here : http://hastebin.com/azagetinir.axapta
22:40 < o_be_one> it comes with mysql-commong and libmysqlclient18
22:41 < o_be_one> ive already compile DDNet-MySQL last time, on Debian 7 i think, maybe it could work on ubuntu 15
22:44 < ParANormaL_> i've installed the c++ connector now, but it's still using the bundled ones deen
22:44 <@deen> ParANormaL_: did you remove the config.lua?
22:45 < ParANormaL_> yes
22:45 < ParANormaL_> removed the config and recompiled
22:45 <@deen> what does mysql_config --version print?
22:49 < ParANormaL_> oh, i was missing something, now it uses the c++ connector
22:49 < o_be_one> btw ParANormaL_ did you used something like that : https://github.com/ddnet/ddnet-scripts/blob/master/servers/mysql.cfg ?
22:49 < ParANormaL_> yes i did
22:49 < ParANormaL_> and the problem seems to be solved now
22:49 < ParANormaL_> after using the c++ connector
22:50 < o_be_one> oh nice
22:50 < o_be_one> how did you installed c++ connector ?
22:50 < ParANormaL_> apt-get install libmysqlclient-dev
22:50 < ParANormaL_> then deleted the config.lua and recompiled the server
22:52 <@deen> ParANormaL_: ok great, so our bundled lib is broken
22:52 <@deen> ParANormaL_: are you on 32 or 64bit?
22:52 < ParANormaL_> 64bit
22:52 <@deen> hm, why didn't I notice that? I'm pretty sure I tested it
22:53 < o_be_one> nice
22:53 < o_be_one> im live trying
22:55 < o_be_one> [16-02-22 21:54:50][SQL]: SQL connection established
22:55 < o_be_one> [16-02-22 21:54:50][SQL]: Tables were created successfully
22:55 < o_be_one> it works for me with remote use
22:55 <@deen> so the lib breaks for some people but not all? huh
22:55 < o_be_one> its Ubuntu 15.10 updated from today :/
22:55 <@deen> we could just try updating it
22:55 < ParANormaL_> maybe i was just unlucky :s
22:55 < o_be_one> ParANormaL_: it was for localhost use ?
22:56 < ParANormaL_> yes
22:56 < o_be_one> maybe fucked dependencys ?
22:56 <@deen> oh yeah, localhost uses sockets instead of tcp, maybe it's that?
22:56 < o_be_one> ok i try
22:56 < ParANormaL_> nah, i tried both
22:56 <@deen> and broken boost lib could be a problem too, i guess
22:56 <@deen> because the mysql c++ connector uses boost
22:56 < ParANormaL_> localhost and 127.0.0.1 got me the same result
23:00 < o_be_one> copying my serv stuffs to the mariadb test serv
23:00 < ParANormaL_> yup, after switching back to the bundled libs i'm still getting the error
23:00 <@deen> ParANormaL_: let's just try new versions
23:01 < ParANormaL_> sure, tell me how
23:01 <@deen> https://dev.mysql.com/downloads/connector/cpp/1.1.html
23:01 <@deen> the bottom one (x86-64, tar), put the libmysqlcppconn-static.a into other/mysql/linux/lib64
23:02 <@deen> and the same for libmysqlclient.a: https://dev.mysql.com/downloads/connector/c/
23:03 < ParANormaL_> Generic Linux (Architecture Independent), Compressed TAR Archive this one?
23:03 <@deen> Oracle tries to force you to sign up, but you can click on "No thanks, just start my download." hidden somwhere
23:03 <@deen> yes
23:04 < ParANormaL_> ah, should i donwload the libs or the source?
23:04 <@deen> Oooh, or it can depend on your g++ version according to the mysql website
23:04 <@deen> the libs, not hte source
23:04 <@deen> "One problem that can occur is when the tools you use to build your application are not compatible with the tools used to build the binary versions of MySQL Connector/C++. Ideally, you need to build your application with the same tools that were used to build the MySQL Connector/C++ binaries."
23:04 <@deen> magnificient
23:05 < o_be_one> no problem with localhost too
23:05 < o_be_one> it works from my side :/
23:05 < o_be_one> Ubuntu 15.10
23:06 <@deen> ParANormaL_: I can also push the changes into the repo for you to try
23:06 < o_be_one> just did apt-get install mariadb-server mariadb-client
23:06 < o_be_one> accepted the pkg list, copied my ddnet-mysql already compiled 3 weeks ago and ran, all is ok
23:07 < o_be_one> mariadb-server-10.0 and mariadb-client-10.0
23:07 < ParANormaL_> no need to, just give me a few minutes deen
23:09 < ParANormaL_> o_be_one same here, except for the errors :b
23:10 < o_be_one> yup thats weird ^^
23:10 < o_be_one> maybe if i install mysqlserver and mariadb after it will get down :p
23:11 < ParANormaL_> idk :D maybe it's your compiled server.. 
23:17 < ParANormaL_> even the changes you suggested dont change anything deen
23:18 <@deen> ParANormaL_: I guess we should just document that mysql stuff is stupid then
23:19 < ParANormaL_> i'd accept this answer
23:19 < ParANormaL_> at least it now works for our server
23:25 < ddnet-commits> [ddnet] def- pushed 1 new commit to master: https://git.io/v2Ovb
23:25 < ddnet-commits> ddnet/master 8940a69 def: Add a note to README that the bundled MySQL libs might not work
23:25 <@deen> Meh, I didn't add the new SQL libs to repo, they are freaking 75 MB
23:25 <@deen> (Maybe we should just remove them altogether)
23:27 < ParANormaL_> why remove them? for some (see o_be_one) they work fine
23:29 <@deen> yeah, if something works fine for some people and randomly fails for others it might be better to remove it so you get a nice error and can follow the instructions that work for everyone instead
23:29 <@deen> also, blows up the repo
23:45 < o_be_one> mmh ...
23:45 < o_be_one> can we trace the log, in a more verbose mode about sql, to understand why it doesnt read the conf to log in mysql deen ?
23:51 <@deen> trace the log?
23:52 < ParANormaL_> it actually reads the config, but doesn't use it when connecting
