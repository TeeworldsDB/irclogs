11:47 <+bridge> [ddnet] <Learath2> @HamidReza585 first get msys2
11:53 <+bridge> [ddnet] <Ryozuki> do we have stderror in system.c?
11:57 <+bridge> [ddnet] <Learath2> stderror?
11:57 <+bridge> [ddnet] <Learath2> you mean the stream?
11:58 <+bridge> [ddnet] <Ryozuki> http://man7.org/linux/man-pages/man3/strerror.3.html
11:58 <+bridge> [ddnet] <Ryozuki> strerror
11:58 <+bridge> [ddnet] <Ryozuki> my bad
11:58 <+bridge> [ddnet] <Ryozuki> typo
11:58 <+bridge> [ddnet] <Ryozuki> we dont have it
12:00 <+ChillerDragun> bru sometimes i feel like prior to microsoft taking over github there were less 500 errors
12:01 <+bridge> [ddnet] <Learath2> it's time I figure out wth is wrong with the macOS CI
12:01 <+ChillerDragun> Learath big mac guy :D thanks for all ur efforts <3
12:01 <+bridge> [ddnet] <heinrich5991> https://en.wikipedia.org/wiki/Big_Mac guy
12:01 <+bridge> [ddnet] <Learath2> I seem to be the only one with a mac that seems to be obsessed enough to debug the mess that is macOS
12:02 <+bridge> [ddnet] <Learath2> 😄
12:04 <+bridge> [ddnet] <Ryozuki> https://cdn.discordapp.com/attachments/293493549758939136/699560814654521364/unknown.png
12:04 <+bridge> [ddnet] <Ryozuki> i didnt open ports
12:05 <+bridge> [ddnet] <Ryozuki> :O
12:05 <+bridge> [ddnet] <heinrich5991> with some nats it works without any manual forwarding
12:05 <+bridge> [ddnet] <heinrich5991> just by sending packets
12:05 <+bridge> [ddnet] <heinrich5991> (same for my nat btw)
12:05 <+bridge> [ddnet] <Ryozuki> hm wait i try with it off
12:05 <+bridge> [ddnet] <heinrich5991> oh
12:05 <+bridge> [ddnet] <heinrich5991> it worked with upnp
12:05 <+bridge> [ddnet] <heinrich5991> nice 🙂
12:06 <+bridge> [ddnet] <heinrich5991> (try a different port, it might persist otherwise)
12:06 <+bridge> [ddnet] <Learath2> routers do all kinds of diiiirty hacks to keep the experience user friendly
12:07 <+bridge> [ddnet] <Ryozuki> with upnp off it doesnt register
12:07 <+bridge> [ddnet] <Ryozuki> https://cdn.discordapp.com/attachments/293493549758939136/699561391119400980/unknown.png
12:07 <+bridge> [ddnet] <heinrich5991> ah 🙂
12:07 <+bridge> [ddnet] <heinrich5991> good job 👍
12:11 <+bridge> [ddnet] <Learath2> I'm updating xcode again
12:11 <+bridge> [ddnet] <Learath2> time to break everything and quit coding for another month
12:22 <+bridge> [ddnet] <HamidReza585> @Learath2 
12:22 <+bridge> [ddnet] <HamidReza585> I am installing it
12:37 <+bridge> [ddnet] <Jupstar ✪> @Ryozuki your fixes in text.cpp create a infinite loop e.g. in the tee setting page
12:37 <+bridge> [ddnet] <Jupstar ✪> 
12:37 <+bridge> [ddnet] <Jupstar ✪> if(!Character)
12:37 <+bridge> [ddnet] <Jupstar ✪>                 break;
12:37 <+bridge> [ddnet] <Jupstar ✪> 
12:37 <+bridge> [ddnet] <Jupstar ✪> line 924
12:39 <+bridge> [ddnet] <HamidReza585> @Learath2 
12:39 <+bridge> [ddnet] <HamidReza585> installed msys2
12:39 <+bridge> [ddnet] <Jupstar ✪> @deen you probably need to release a new client version, if that is in it
12:39 <+bridge> [ddnet] <Jupstar ✪> cde63e2f48fde6f3dca2a3cc695b33db55be2c0e  "Fix TexEx UB"
12:40 <+bridge> [ddnet] <Learath2> you do a `pacman -Syuu` then you restart msys, then you do another `pacman -Syuu` then you do `pacboy -S gcc:x`
12:42 <+bridge> [ddnet] <Learath2> you also need `pacman -S cmake make`
12:43 <+bridge> [ddnet] <HamidReza585> a minute . . .
12:46 <+bridge> [ddnet] <Ryozuki> oh
12:49 <+bridge> [ddnet] <Ryozuki> @Jupstar ✪ should i just remove that check?
12:50 <+bridge> [ddnet] <Jupstar ✪> well for now yes, that whole function is a big mess, so u probs would need to understand everything so it works correctly without the memory leak xD
12:51 <+bridge> [ddnet] <Ryozuki> xd
12:52 <+bridge> [ddnet] <Ryozuki> xd
12:52 <+bridge> [ddnet] <Jupstar ✪> xDDDDDDDDDDDD
13:12 <+bridge> [ddnet] <Trafalgar Law> If some has time, could some take a look on ddnet7 and find these bugs?
13:12 <+bridge> [ddnet] <Trafalgar Law> 
13:12 <+bridge> [ddnet] <Trafalgar Law> ```
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-14 11:42:07][server]: 'New' -> 'New'
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-14 11:42:07][server]: ClientID=55 authed with key=default_mod (moderator)
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-14 11:42:07][sql]: Getting best time done
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-14 11:42:08][server]: client dropped. cid=55 addr=<{unknown type 0}> reason='Error sending data'
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-14 11:42:08][game]: kill killer='55:0:New' victim='55:0:New' weapon=-3 special=0
13:12 <+bridge> [ddnet] <Trafalgar Law> 
13:12 <+bridge> [ddnet] <Trafalgar Law> #0  0x00005555555a9ca6 in CServer::UpdateClientRconCommands (this=0x7ffff62e5010) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:897
13:12 <+bridge> [ddnet] <Trafalgar Law> #1  0x00005555555ad6e3 in CServer::Run (this=0x7ffff62e5010) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:1672
13:12 <+bridge> [ddnet] <Trafalgar Law> #2  0x00005555555b1108 in main (argc=2, argv=0x7fffffffe488) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:2504
13:12 <+bridge> [ddnet] <Trafalgar Law> ```
13:12 <+bridge> [ddnet] <Trafalgar Law> 
13:12 <+bridge> [ddnet] <Trafalgar Law> And 
13:12 <+bridge> [ddnet] <Trafalgar Law> 
13:12 <+bridge> [ddnet] <Trafalgar Law> 
13:12 <+bridge> [ddnet] <Trafalgar Law> ```
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-13 19:53:36][server]: ClientID=40 authed with key=default_mod (moderator)
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-13 19:53:37][server]: client dropped. cid=40 addr=<{unknown type 0}> reason='Error sending data'
13:12 <+bridge> [ddnet] <Trafalgar Law> [2020-04-13 19:53:37][game]: kill killer='40:0:Amber Zahn' victim='40:0:Amber Zahn' weapon=-3 special=0
13:13 <+bridge> [ddnet] <Trafalgar Law> 
13:13 <+bridge> [ddnet] <Trafalgar Law> #0  0x00005555555a9f54 in CServer::UpdateClientMapListEntries (this=0x7ffff62e5010) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:927
13:13 <+bridge> [ddnet] <Trafalgar Law> #1  0x00005555555ad6f2 in CServer::Run (this=0x7ffff62e5010) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:1673
13:13 <+bridge> [ddnet] <Trafalgar Law> #2  0x00005555555b1108 in main (argc=2, argv=0x7fffffffe488) at /opt/twserver/git/ddrace/src/engine/server/server.cpp:2504
13:13 <+bridge> [ddnet] <Trafalgar Law> 
13:13 <+bridge> [ddnet] <Trafalgar Law> ```
13:13 <+bridge> [ddnet] <Trafalgar Law> 
13:13 <+bridge> [ddnet] <Trafalgar Law> I can't reproduce it, just what I can say it happens when some mods try to login
13:14 <+bridge> [ddnet] <deen> @Jupstar ✪ why? the endless loop version wasn'T released
13:15 <+bridge> [ddnet] <Jupstar ✪> yeah that was the question 😄
13:16 <+bridge> [ddnet] <deen> ok
13:19 <+bridge> [ddnet] <HamidReza585> @Learath2 complete
13:20 <+bridge> [ddnet] <Learath2> You cd over to where ddnet is
13:20 <+bridge> [ddnet] <Learath2> you do `mkdir build && cd build && cmake -G"MSYS Makefile" .. && make`
13:23 <+bridge> [ddnet] <Learath2> @Trafalgar Law I tried to debug that for an hour or so, without being able to reproduce it it's just pretty much impossible
13:24 <+bridge> [ddnet] <Learath2> maybe if you get me a core dump and the binary I can try to take another look
13:26 <+bridge> [ddnet] <Learath2> @deen I'm sorry to report that curl is broken again
13:27 <+bridge> [ddnet] <Learath2> seems you compiled without ssl
13:27 <+bridge> [ddnet] <HamidReza585> @Learath2 where should I put these commands?
13:27 <+bridge> [ddnet] <Learath2> in msys, you cd to the directory of ddnet
13:27 <+bridge> [ddnet] <Learath2> then you do that
13:27 <+bridge> [ddnet] <HamidReza585> in errors
13:27 <+bridge> [ddnet] <HamidReza585> it *
13:27 <+bridge> [ddnet] <Learath2> show me the errors and maybe I can help
13:27 <+bridge> [ddnet] <Learath2> I'm not telepathic
13:31 <+bridge> [ddnet] <Trafalgar Law> @Learath2 I will send you the core dumps in few minutes
13:31 <+bridge> [ddnet] <Learath2> don't forget the binary, without the binary coredumps are not very useful
13:32 <+bridge> [ddnet] <HamidReza585> https://cdn.discordapp.com/attachments/293493549758939136/699582896918233190/bandicam_2020-04-14_16-01-49-717.jpg
13:35 <+bridge> [ddnet] <HamidReza585> @Learath2
13:35 <+bridge> [ddnet] <HamidReza585> It's the error
13:35 <+bridge> [ddnet] <Learath2> first do the cd
13:35 <+bridge> [ddnet] <Learath2> have you ever used a terminal even? 😛
13:36 <+bridge> [ddnet] <Learath2> also I don't think msys mounts C at C:
13:36 <+bridge> [ddnet] <HamidReza585> I write the cd and enter
13:37 <+bridge> [ddnet] <HamidReza585> I > have you ever used a terminal even? 😛
13:37 <+bridge> [ddnet] <HamidReza585> @Learath2 
13:37 <+bridge> [ddnet] <HamidReza585> Yes. Cmd and powershell :pepeH:
13:37 <+bridge> [ddnet] <Learath2> okay, problem is that you are using \ there and that c isnt mounted at C:
13:38 <+bridge> [ddnet] <Learath2> the path should be /c/Users/HamidReza/Desktop/ddnet-master/build
13:40 <+bridge> [ddnet] <Learath2> on unix-like shells \ escapes the next character, that \ at the end of the line is escaping the newline so the command isn't executing
13:41 <+bridge> [ddnet] <HamidReza585> I've never worked with C, before.
13:41 <+bridge> [ddnet] <HamidReza585> Thanks for info
13:42 <+bridge> [ddnet] <HamidReza585> I will test that after my lunch. 😐
14:03 <+bridge> [ddnet] <HamidReza585> https://cdn.discordapp.com/attachments/293493549758939136/699590694548799558/bandicam_2020-04-14_16-32-53-623.jpg
14:04 <+bridge> [ddnet] <noby> wut
14:04 <+bridge> [ddnet] <Ryozuki> dont put make
14:04 <+bridge> [ddnet] <noby> type cmake ..
14:04 <+bridge> [ddnet] <noby> and then after it finishes
14:04 <+bridge> [ddnet] <noby> type make
14:04 <+bridge> [ddnet] <Ryozuki> not just cmake
14:04 <+bridge> [ddnet] <Ryozuki> he needs the -G too
14:06 <+bridge> [ddnet] <HamidReza585> when I type `cmake -G"MSYS Makefile" ..` it disappears and nothing happens
14:07 <+bridge> [ddnet] <Learath2> maybe they merged the generators
14:07 <+bridge> [ddnet] <Learath2> just do `cmake ..`
14:07 <+bridge> [ddnet] <Ryozuki> https://www.openhub.net/p/ddnet
14:07 <+bridge> [ddnet] <Ryozuki> https://cdn.discordapp.com/attachments/293493549758939136/699591764066959400/unknown.png
14:07 <+bridge> [ddnet] <Ryozuki> interesting
14:08 <+bridge> [ddnet] <Ryozuki> "with a very low number of source code comments" :justatest:
14:08 <+bridge> [ddnet] <Learath2> 😄
14:08 <+bridge> [ddnet] <Ryozuki> https://cdn.discordapp.com/attachments/293493549758939136/699591989003419728/unknown.png
14:08 <+bridge> [ddnet] <Learath2> teeworlds is about as well documented as macOS
14:08 <+bridge> [ddnet] <Ryozuki> our work is worth 2.5M dollars
14:08 <+bridge> [ddnet] <Ryozuki> lmao
14:09 <+bridge> [ddnet] <Learath2> I'll accept a check any time
14:09 <+bridge> [ddnet] <HamidReza585> @Learath2 It has a lot of errors (for e.g. `The CXX compiler identification is unknown` and also for C)
14:10 <+bridge> [ddnet] <Learath2> well first try `gcc --version`
14:10 <+bridge> [ddnet] <Learath2> let's see if you installed gcc correctly
14:11 <+bridge> [ddnet] <HamidReza585> `command not found`
14:11 <+bridge> [ddnet] <Learath2> okay did you do `pacboy -S gcc:x`
14:11 <+bridge> [ddnet] <HamidReza585> yes
14:11 <+bridge> [ddnet] <HamidReza585> I think it downloaded 58 mb
14:11 <+bridge> [ddnet] <HamidReza585> and then installed it
14:12 <+bridge> [ddnet] <Learath2> well try a `find / | grep gcc`
14:12 <+bridge> [ddnet] <Learath2> see I'm trying to do this from memory, I don't have windows installed, anywhere to check
14:13 <+bridge> [ddnet] <HamidReza585> A lot of sentences appeared
14:13 <+bridge> [ddnet] <Learath2> well show me
14:13 <+bridge> [ddnet] <HamidReza585> ok
14:13 <+bridge> [ddnet] <Learath2> maybe try `x86_64-w64-mingw32-gcc --version` too
14:13 <+bridge> [ddnet] <Learath2> that could work
14:15 <+bridge> [ddnet] <HamidReza585> didn't work, let me show you
14:25 <+bridge> [ddnet] <HamidReza585> http://www.mediafire.com/file/uhdkwqosz74n65g/bandicam_2020-04-14_16-45-48-780.mp4/file
14:25 <+bridge> [ddnet] <HamidReza585> @Learath2
14:35 <+bridge> [ddnet] <deen> @Learath2 you told me to use --without-ssl. so now i should enable it again?
14:39 <+bridge> [ddnet] <HamidReza585> @Learath2 I sent a video link which has all of the lines in it.
14:40 <+bridge> [ddnet] <Learath2> @deen huh, I compiled with `--without-ssl --with-secure-transport` it worked just fine
14:40 <+bridge> [ddnet] <Learath2> can you check the output of configure?
14:45 <+bridge> [ddnet] <Learath2> @HamidReza585 hmm, you have gcc, maybe you don't have it in your path?
14:45 <+bridge> [ddnet] <Learath2> check `echo $PATH`
14:45 <+bridge> [ddnet] <HamidReza585> let me check
14:47 <+bridge> [ddnet] <HamidReza585> https://cdn.discordapp.com/attachments/293493549758939136/699601795655270400/bandicam_2020-04-14_17-17-18-564.jpg
14:47 <+bridge> [ddnet] <Learath2> no not your windows path
14:48 <+bridge> [ddnet] <Learath2> msys has it's own path
14:48 <+bridge> [ddnet] <Learath2> that's why I said `echo $PATH`
14:48 <+bridge> [ddnet] <HamidReza585> Oh I didn't see this.
14:50 <+bridge> [ddnet] <HamidReza585> It gave me the path of powershell when I entered it.
14:51 <+bridge> [ddnet] <Learath2> huh, maybe they implement it different nowadays
14:51 <+bridge> [ddnet] <Learath2> anyway try `export PATH=$PATH:/mingw64/bin`
14:52 <+bridge> [ddnet] <Learath2> `gcc --version` should work after then
14:52 <+bridge> [ddnet] <HamidReza585> worked just fine
14:54 <+bridge> [ddnet] <HamidReza585> https://cdn.discordapp.com/attachments/293493549758939136/699603452829106327/bandicam_2020-04-14_17-23-21-967.jpg
14:55 <+bridge> [ddnet] <Learath2> okay, now let's try cmake again
14:55 <+bridge> [ddnet] <Learath2> `cmake ..`
14:56 <+bridge> [ddnet] <HamidReza585> it's working . . .
14:56 <+bridge> [ddnet] <Learath2> lets see if it fails or not
14:57 <+bridge> [ddnet] <HamidReza585> It's working, but couldn't find some of packages
14:58 <+bridge> [ddnet] <HamidReza585> Failed
14:58 <+bridge> [ddnet] <Learath2> try `rm -rf *` to clear it, then `cmake -DPREFER_BUNDLED_LIBS=ON ..`
14:59 <+bridge> [ddnet] <HamidReza585> A couple of CMakeLists.txt errors
14:59 <+bridge> [ddnet] <HamidReza585> not the command taht you said
14:59 <+bridge> [ddnet] <HamidReza585> not the command that you said
14:59 <+bridge> [ddnet] <HamidReza585> I said `cmake ..`
15:03 <+bridge> [ddnet] <Learath2> well it'd be nice if you could show me the errors at least
15:03 <+bridge> [ddnet] <HamidReza585> You must install Curl to compile the DDNet
15:03 <+bridge> [ddnet] <HamidReza585> You must install Python to compile the DDNet
15:03 <+bridge> [ddnet] <HamidReza585> You must install Freetype to compile the DDNet client
15:03 <+bridge> [ddnet] <HamidReza585> You must install ogg to compile the DDNet client
15:03 <+bridge> [ddnet] <HamidReza585> You must install Opus to compile the DDNet client
15:03 <+bridge> [ddnet] <HamidReza585> You must install Opusfile to compile the DDNet client
15:03 <+bridge> [ddnet] <HamidReza585> You must install SDL2 to compile the DDNet client
15:05 <+bridge> [ddnet] <HamidReza585> You must install Curl to compile DDNet
15:05 <+bridge> [ddnet] <HamidReza585> You must install Python to compile DDNet
15:05 <+bridge> [ddnet] <HamidReza585> You must install Freetype to compile the DDNet client
15:05 <+bridge> [ddnet] <HamidReza585> You must install ogg to compile the DDNet client
15:05 <+bridge> [ddnet] <HamidReza585> You must install Opus to compile the DDNet client
15:05 <+bridge> [ddnet] <HamidReza585> You must install Opusfile to compile the DDNet client
15:05 <+bridge> [ddnet] <HamidReza585> You must install SDL2 to compile the DDNet client
15:05 <+bridge> [ddnet] <Vexar> Download ddnet-libs and extract them to your ddnet directory
15:06 <+bridge> [ddnet] <Learath2> oh did you get ddnet-libs, yeah
15:06 <+bridge> [ddnet] <Learath2> you also need python
15:06 <+bridge> [ddnet] <HamidReza585> python is installed
15:06 <+bridge> [ddnet] <HamidReza585> Python 3.8.2
15:06 <+bridge> [ddnet] <Vexar> no he need just libs
15:06 <+bridge> [ddnet] <Learath2> check `python --version`
15:06 <+bridge> [ddnet] <Learath2> @Vexar we don't ship python in ddnet-libs
15:06 <+bridge> [ddnet] <HamidReza585> command not found
15:06 <+bridge> [ddnet] <Vexar> https://github.com/ddnet/ddnet-libs
15:06 <+bridge> [ddnet] <Learath2> see, python is at the very least not in PATH
15:07 <+bridge> [ddnet] <HamidReza585> windows path?
15:07 <+bridge> [ddnet] <Learath2> @HamidReza585 add that to path aswell
15:07 <+bridge> [ddnet] <Learath2> just do `export PATH=$PATH:<pythonpath>`
15:07 <+bridge> [ddnet] <Learath2> you will need ddnet-libs too
15:08 <+bridge> [ddnet] <HamidReza585> about the pythonpath, should I copy the directory of the program?
15:09 <+bridge> [ddnet] <Learath2> the directory where python.exe it
15:09 <+bridge> [ddnet] <Learath2> is*
15:09 <+bridge> [ddnet] <HamidReza585> C:\Users\HamidReza\AppData\Local\Programs\Python\Python38-32
15:09 <+bridge> [ddnet] <HamidReza585> python.exe is here
15:10 <+bridge> [ddnet] <HamidReza585> should I enter the full path?
15:11 <+bridge> [ddnet] <Learath2> yes, but C: is /c in msys
15:11 <+bridge> [ddnet] <Learath2> and the \s all need to be /s
15:12 <+bridge> [ddnet] <HamidReza585> `export PATH=$PATH:/c/Users/HamidReza/Appdata/Local/Programs/Python/Python38-32
15:12 <+bridge> [ddnet] <HamidReza585> `export PATH=$PATH:/c/Users/HamidReza/Appdata/Local/Programs/Python/Python38-32`
15:12 <+bridge> [ddnet] <HamidReza585> you mean something like this?
15:16 <+bridge> [ddnet] <HamidReza585> So, where should I copy the ddnet-libs?
15:19 <+bridge> [ddnet] <HamidReza585> @Learath2
15:20 <+bridge> [ddnet] <Learath2> next to the build folder
15:20 <+bridge> [ddnet] <HamidReza585> in ddnet-master folder?
15:20 <+bridge> [ddnet] <Learath2> ye
15:21 <+bridge> [ddnet] <HamidReza585> just the dlls?
15:22 <+bridge> [ddnet] <HamidReza585> @Learath2
15:22 <+bridge> [ddnet] <Learath2> no the entire ddnet-libs folder
15:22 <+bridge> [ddnet] <HamidReza585> ddnet-libs-master folder?
15:23 <+bridge> [ddnet] <Learath2> what is inside it?
15:23 <+bridge> [ddnet] <HamidReza585> 5 folders
15:23 <+bridge> [ddnet] <HamidReza585> curl, freetype, mysql, opus, sdl
15:23 <+bridge> [ddnet] <HamidReza585> name of the folders
15:23 <+bridge> [ddnet] <Learath2> rename it to `ddnet-libs` put it in next to build
15:24 <+bridge> [ddnet] <Learath2> inside ddnet-master that is
15:29 <+bridge> [ddnet] <Patiga> what happened in 2017? https://www.openhub.net/p/ddnet/analyses/latest/languages_summary
15:33 <+bridge> [ddnet] <HamidReza585> > inside ddnet-master that is
15:33 <+bridge> [ddnet] <HamidReza585> @Learath2 
15:33 <+bridge> [ddnet] <HamidReza585> I did all you said. the errors are the same just python is removed from the errors.
15:33 <+bridge> [ddnet] <HamidReza585> https://discordapp.com/channels/252358080522747904/293493549758939136/699605812011729017
15:33 <+bridge> [ddnet] <Learath2> clean out the build folder and try again
15:34 <+bridge> [ddnet] <Learath2> if it doesn't work, clean it out again, then try `cmake -DPREFER_BUNDLED_LIBS=ON ..` instead
15:36 <+bridge> [ddnet] <HamidReza585> the same errors
15:37 <+bridge> [ddnet] <HamidReza585> I cleaned and tried `cmake ..` then I cleaned it and tried `cmake -DPREFER_BUNDLED_LIBS=ON ..`
15:37 <+bridge> [ddnet] <HamidReza585> I have the same errorsw
15:38 <+bridge> [ddnet] <HamidReza585> @Learath2
15:39 <+bridge> [ddnet] <Learath2> uff, I hate debugging cmake problems 😦
15:39 <+bridge> [ddnet] <Learath2> @heinrich5991 where does cmake debug output go?
15:40 <+bridge> [ddnet] <Vexar> did you put that 5 folder in ddnet-libs ?
15:40 <+bridge> [ddnet] <HamidReza585> yes
15:41 <+bridge> [ddnet] <Vexar> check your CMakeCache.txt
15:41 <+bridge> [ddnet] <Vexar> that a path location is correct for libraries
15:41 <+bridge> [ddnet] <Vexar> that the path location is correct for libraries
15:43 <+bridge> [ddnet] <HamidReza585> which line?
15:43 <+bridge> [ddnet] <Vexar> for example
15:43 <+bridge> [ddnet] <Vexar> CURL_INCLUDEDIR
15:43 <+bridge> [ddnet] <Vexar> or CURL_LIBRARY
15:44 <+bridge> [ddnet] <Learath2> CURL_INCLUDEDIR would never be correct when cmake couldn't even find it to begin with
15:44 <+bridge> [ddnet] <Vexar> you can manually set location for libraries
15:44 <+bridge> [ddnet] <Vexar> no iknow
15:44 <+bridge> [ddnet] <Vexar> i mean he can set them manually if cmake unable find them
15:44 <+bridge> [ddnet] <HamidReza585> CURL_INCLUDEDIR:PATH=CURL_INCLUDEDIR-NOTFOUND
15:45 <+bridge> [ddnet] <Vexar> ok
15:45 <+bridge> [ddnet] <Vexar> CURL_INCLUDEDIR:PATH=C:/ddnet/ddnet-libs/curl/include
15:48 <+bridge> [ddnet] <HamidReza585> shoouldn't it be /c/Users/HamidReza/Desktop/ddnet-master/ddnet-libs/curl/include ?
15:48 <+bridge> [ddnet] <Vexar> yes it should
15:48 <+bridge> [ddnet] <Vexar> but it's a little difficult for you to set all path manually
15:49 <+bridge> [ddnet] <Vexar> do you use cmake gui ?
15:49 <+bridge> [ddnet] <HamidReza585> I have it, but, now, I am using msys
15:49 <+bridge> [ddnet] <Learath2> this is just all wrong, cmake should be perfectly capable of finding the libraries itself
15:50 <+bridge> [ddnet] <Vexar> Learath right
15:50 <+bridge> [ddnet] <Vexar> i think you better use cmake gui
15:50 <+bridge> [ddnet] <HamidReza585> let me take a try
15:50 <+bridge> [ddnet] <Vexar> Good luck
15:51 <+bridge> [ddnet] <Learath2> you can't configure for a msys build from the gui unless the gui can select generators
15:52 <+bridge> [ddnet] <Learath2> @heinrich5991 cmon, I'll do the debugging, just tell me what output would help figure out why cmake can't find packages
15:53 <+bridge> [ddnet] <Learath2> I'll just install windows then I guess
15:53 <+bridge> [ddnet] <Vexar> 😄
15:54 <+bridge> [ddnet] <HamidReza585> CMake Error: The source "C:/Users/HamidReza/Desktop/ddnet-master/CMakeLists.txt" does not match the source "/c/Users/HamidReza/Desktop/ddnet-master/CMakeLists.txt" used to generate cache.  Re-run cmake with a different source directory.
15:54 <+bridge> [ddnet] <HamidReza585> when I use the GUI
15:54 <+bridge> [ddnet] <HamidReza585> how can I change the generator?
15:55 <+bridge> [ddnet] <HamidReza585> it's on Unix makefiles
15:55 <+bridge> [ddnet] <Vexar> that shouldn't be C:/Users/... ?
15:56 <+bridge> [ddnet] <HamidReza585> I can't edit it
15:56 <+bridge> [ddnet] <HamidReza585> in the GUI
15:56 <+bridge> [ddnet] <Learath2> @Vexar inside msys you use / for paths and c is mounted in /c/
15:56 <+bridge> [ddnet] <Learath2> @HamidReza585 first clear your build folder
15:56 <+bridge> [ddnet] <Vexar> oh
15:56 <+bridge> [ddnet] <Learath2> then try the gui
15:56 <+bridge> [ddnet] <Learath2> remember to set unix makefiles
15:56 <+bridge> [ddnet] <Learath2> actually I don't think this'll work at all, it won't find mingw properly
15:57 <+bridge> [ddnet] <Learath2> maybe if you add msys's mingw bin folder to your path and used the mingw toolchain
15:57 <+bridge> [ddnet] <HamidReza585> the same error
15:57 <+bridge> [ddnet] <HamidReza585> https://discordapp.com/channels/252358080522747904/293493549758939136/699618544576626688
15:58 <+bridge> [ddnet] <Learath2> or just wait for like 30 minutes for this vm to install and I'll just take a look myself
15:58 <+bridge> [ddnet] <HamidReza585> VM?
15:58 <+bridge> [ddnet] <HamidReza585> Virtual Box?
15:59 <+bridge> [ddnet] <HamidReza585> Oh you meant Virtual Machine
15:59 <+bridge> [ddnet] <HamidReza585> ok
16:17 <+bridge> [ddnet] <HamidReza585> Did it complete?
16:18 <+bridge> [ddnet] <HamidReza585> Is it complete?
16:18 <+bridge> [ddnet] <HamidReza585> @Learath2
16:18 <+bridge> [ddnet] <Learath2> it works like shit...
16:18 <+bridge> [ddnet] <Learath2> takes a while to move the mouse at turtle speed
16:19 <+bridge> [ddnet] <HamidReza585> After a cup of tea, I will test it in another directory
16:19 <+bridge> [ddnet] <HamidReza585> With Gui
16:24 <+bridge> [ddnet] <Learath2> I miss my desktop so much 😦
16:29 <+bridge> [ddnet] <HamidReza585> https://cdn.discordapp.com/attachments/293493549758939136/699627515362279505/bandicam_2020-04-14_18-59-34-473.jpg
16:30 <+bridge> [ddnet] <HamidReza585> which one should I use?
16:31 <+bridge> [ddnet] <Learath2> Unix Makefiles
16:31 <+bridge> [ddnet] <HamidReza585> don't have it
16:31 <+bridge> [ddnet] <Learath2> what do you even have?
16:31 <+bridge> [ddnet] <HamidReza585> let me check again
16:31 <+bridge> [ddnet] <HamidReza585> I have it
16:31 <+bridge> [ddnet] <HamidReza585> my bad
16:32 <+bridge> [ddnet] <Learath2> and you need to specify a toolchain
16:32 <+bridge> [ddnet] <HamidReza585> third checkbox?
16:33 <+bridge> [ddnet] <HamidReza585> @Learath2
16:35 <+bridge> [ddnet] <HamidReza585> should I choose the third checkbox?
16:37 <+bridge> [ddnet] <HamidReza585> where is the toolchain?
16:37 <+bridge> [ddnet] <Learath2> in the cmake foldr
16:37 <+bridge> [ddnet] <HamidReza585> there are a lot of files
16:37 <+bridge> [ddnet] <HamidReza585> not a lot
16:37 <+bridge> [ddnet] <HamidReza585> 3 toolchains
16:38 <+bridge> [ddnet] <HamidReza585> which one shoul I use?
16:38 <+bridge> [ddnet] <HamidReza585> darwin.toolchain
16:38 <+bridge> [ddnet] <HamidReza585> mingw32.toolchain
16:38 <+bridge> [ddnet] <HamidReza585> ming64.toolchain
16:38 <+bridge> [ddnet] <HamidReza585> darwin.toolchain
16:38 <+bridge> [ddnet] <HamidReza585> mingw32.toolchain
16:38 <+bridge> [ddnet] <HamidReza585> mingw64.toolchain
16:39 <+bridge> [ddnet] <HamidReza585> mingw64?
16:39 <+bridge> [ddnet] <HamidReza585> which one should I use?
16:40 <+bridge> [ddnet] <Learath2> mingw64 is the one you want
16:40 <+bridge> [ddnet] <HamidReza585> ok
16:41 <+bridge> [ddnet] <HamidReza585> CMake Error: CMake was unable to find a build program corresponding to "Unix Makefiles".  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.
16:41 <+bridge> [ddnet] <Learath2> yeah, the windows native cmake gui can't find the msys tools
16:43 <+bridge> [ddnet] <HamidReza585> `export PATH$PATH:/c/.../ddnet-libs` what do you think about this?
16:43 <+bridge> [ddnet] <HamidReza585> should It work?
16:45 <+bridge> [ddnet] <Learath2> very unlitely
16:45 <+bridge> [ddnet] <Learath2> unlikely, but you can try
16:50 <+bridge> [ddnet] <Learath2> ok, I got the stupid vm to work
16:50 <+bridge> [ddnet] <Learath2> let's see how this is supposed to be done
16:53 <+bridge> [ddnet] <HamidReza585> I really don't know why it's not working
16:53 <+bridge> [ddnet] <HamidReza585> it should work
16:55 <+bridge> [ddnet] <HamidReza585> @Learath2 
16:55 <+bridge> [ddnet] <HamidReza585> are you using linux?
16:56 <+bridge> [ddnet] <HamidReza585> or Mac OS?
16:57 <+bridge> [ddnet] <Learath2> I'm on macOS right now, but I have linux on my actual computer
16:58 <+bridge> [ddnet] <HamidReza585> have you ever compiled this game? with which tool?
16:59 <+bridge> [ddnet] <HamidReza585> And on which OS?
16:59 <+bridge> [ddnet] <HamidReza585> Have you ever compiled this game? with which tool?
16:59 <+bridge> [ddnet] <Learath2> I compiled it on every single OS at one time with cmake
16:59 <+bridge> [ddnet] <Learath2> haven't touched windows in a couple years though
17:00 <+bridge> [ddnet] <Vexar> @HamidReza585 you want compile ddnet on windows with cmake and visual studio ?
17:01 <+bridge> [ddnet] <HamidReza585> without visual studio\
17:01 <+bridge> [ddnet] <HamidReza585> with anything else
17:01 <+bridge> [ddnet] <Vexar> I can help you with visual studio and cmake
17:01 <+bridge> [ddnet] <HamidReza585> I just have Visual studio 2017 express
17:01 <+bridge> [ddnet] <Learath2> I'm waiting for msys to download gcc
17:01 <+bridge> [ddnet] <Learath2> you can compile with vs2017
17:02 <+bridge> [ddnet] <HamidReza585> I tried
17:02 <+bridge> [ddnet] <Vexar> is express edition have c++ ?
17:02 <+bridge> [ddnet] <HamidReza585> This is my problem. I don't know
17:02 <+bridge> [ddnet] <Learath2> well I'll let you know how to do it with msys in about 20 minutes
17:02 <+bridge> [ddnet] <Learath2> with vs, you can follow @heinrich5991's guide on the forum
17:03 <+bridge> [ddnet] <Vexar> I remember that we use vs 2010 express c++ and bam to compile ddnet before version 10 maybe you able to use vs 2017 express c++ and cmake to compile latest version of ddnet
17:03 <+bridge> [ddnet] <HamidReza585> I need some help
17:04 <+bridge> [ddnet] <Learath2> https://forum.ddnet.tw/viewtopic.php?f=16&t=5765
17:04 <+bridge> [ddnet] <Vexar> I can tell 100% work with download visual studio 2019 community and latest cmake version
17:04 <+bridge> [ddnet] <Vexar> 😄
17:04 <+bridge> [ddnet] <Learath2> This was useful to people in the past
17:04 <+bridge> [ddnet] <HamidReza585> The main problem is my internet
17:04 <+bridge> [ddnet] <HamidReza585> it's speed is 50kb or lower 😐
17:04 <+bridge> [ddnet] <Vexar> where are you come from ?
17:05 <+bridge> [ddnet] <HamidReza585> IRAN
17:05 <+bridge> [ddnet] <Vexar> Use irancell or mci isp
17:05 <+bridge> [ddnet] <Vexar> if you have 4G on your phone
17:06 <+bridge> [ddnet] <Learath2> ah, 50k is not fun to work with
17:06 <+bridge> [ddnet] <Learath2> been there, done that 😦
17:07 <+bridge> [ddnet] <Vexar> Iran's networks are ruined right now
17:07 <+bridge> [ddnet] <HamidReza585> And I should buy unlimited network for night for doing that
17:07 <+bridge> [ddnet] <Vexar> yeah you should
17:07 <+bridge> [ddnet] <Learath2> I'm downloading gcc
17:08 <+bridge> [ddnet] <Vexar> let me check vs 2017 express
17:08 <+bridge> [ddnet] <Learath2> you can do it with vs2017 express
17:08 <+bridge> [ddnet] <HamidReza585> > you can do it with vs2017 express
17:08 <+bridge> [ddnet] <HamidReza585> @Learath2
17:08 <+bridge> [ddnet] <HamidReza585> Still? :?
17:08 <+bridge> [ddnet] <Learath2> but either way you need to get the windows sdk, c/c++ extensions and stuff, it'll take a lot of internet 🙂
17:09 <+bridge> [ddnet] <Learath2> @HamidReza585 that forum thread I linked uses vs2017
17:09 <+bridge> [ddnet] <Vexar> that was community edition of visual studio 2017
17:09 <+bridge> [ddnet] <HamidReza585> I read all of these posts
17:10 <+bridge> [ddnet] <HamidReza585> the button that he chosen was not available
17:10 <+bridge> [ddnet] <Learath2> express shouldn't be any different
17:10 <+bridge> [ddnet] <Learath2> atleast i don't remember so
17:10 <+bridge> [ddnet] <HamidReza585> the button that he chosen was not available in mine
17:10 <+bridge> [ddnet] <Learath2> tbh back when I last used VS it was a paid tool so I'm not completely sure
17:12 <+bridge> [ddnet] <HamidReza585> @Vexar Do you test the VS 2017 express?
17:12 <+bridge> [ddnet] <Vexar> no
17:12 <+bridge> [ddnet] <Vexar> i using 2019 community
17:13 <+bridge> [ddnet] <HamidReza585> If I buy an unlimited net, I will download the latest version :/
17:15 <+bridge> [ddnet] <HamidReza585> @Vexar @Learath2 
17:15 <+bridge> [ddnet] <HamidReza585> What about VS Code?
17:15 <+bridge> [ddnet] <Vexar> never tested
17:15 <+bridge> [ddnet] <HamidReza585> It's 300mg
17:15 <+bridge> [ddnet] <HamidReza585> I think
17:17 <+bridge> [ddnet] <Learath2> VSCode doesn't have a builder
17:17 <+bridge> [ddnet] <Vexar> you should download plugins for vs code
17:17 <+bridge> [ddnet] <Vexar> and i never tested vs code to see it's work with ddnet or not
17:19 <+bridge> [ddnet] <Learath2> it works fine for coding, it doesn't come with a compiler
17:19 <+bridge> [ddnet] <Learath2> it's just a text editor
17:19 <+bridge> [ddnet] <Vexar> yeah it's more like nodepad++ or sublime text
17:20 <+bridge> [ddnet] <HamidReza585> I saw my brother a time when he was running some javascript codes in it I think
17:21 <+bridge> [ddnet] <Learath2> vscode is based on electron, which is just a chromium browser stripped down, so it has a js engine in it
17:21 <+bridge> [ddnet] <Learath2> I think it runs v8
17:22 <+bridge> [ddnet] <Vexar> @Learath2 it is possible to increase ddnet max clients slots ?
17:22 <+bridge> [ddnet] <Learath2> more then 64?
17:22 <+bridge> [ddnet] <Vexar> y
17:23 <+bridge> [ddnet] <Learath2> if you can code it, sure
17:23 <+bridge> [ddnet] <Vexar> I used chillerdragon github to do it
17:23 <+bridge> [ddnet] <Vexar> but it's required to some changes in client side too
17:23 <+bridge> [ddnet] <Vexar> like scoreboard
17:23 <+bridge> [ddnet] <HamidReza585> @Vexar Can you compile DDNet ++ for me? : /
17:24 <+bridge> [ddnet] <Vexar> chillerdragon's DDNet ?
17:24 <+bridge> [ddnet] <HamidReza585> Yes.
17:24 <+bridge> [ddnet] <Vexar> yes wait download it
17:24 <+bridge> [ddnet] <HamidReza585> https://github.com/ddnetpp/ddnetpp
17:27 <+bridge> [ddnet] <HamidReza585> > yes wait download it
17:27 <+bridge> [ddnet] <HamidReza585> @Vexar 
17:27 <+bridge> [ddnet] <HamidReza585> Are you compiling it?
17:28 <+bridge> [ddnet] <Vexar> yes
17:28 <+bridge> [ddnet] <HamidReza585> Ok.
17:31 <+bridge> [ddnet] <Learath2> okay figured it out with msys
17:32 <+bridge> [ddnet] <Learath2> you need to do `pacman -R cmake` then `pacboy -S cmake:x`
17:32 <+bridge> [ddnet] <Learath2> and use the shortcut for mingw64 while launching msys, not just msys2
17:32 <+bridge> [ddnet] <Vexar> https://cdn.discordapp.com/attachments/293493549758939136/699643279670771713/DDNetPP.exe
17:33 <+bridge> [ddnet] <HamidReza585> thanks
17:33 <+bridge> [ddnet] <HamidReza585> @Learath2 I didn't understand the last sentence
17:34 <+bridge> [ddnet] <Learath2> msys2 creates 3 shortcuts in your start menu when you install it
17:34 <+bridge> [ddnet] <Learath2> you need to use the mingw 64 one
17:34 <+bridge> [ddnet] <HamidReza585> oh
17:35 <+bridge> [ddnet] <Vexar> @Learath2 you think do you have time to work on 128 slots server/client version of ddnet ?
17:37 <+bridge> [ddnet] <HamidReza585> @Vexar when I launch this file, nothing happens
17:37 <+bridge> [ddnet] <Learath2> you also do `cmake -G"MSYS Makefiles" ..`
17:38 <+bridge> [ddnet] <Learath2> @Vexar idk, 128 slots is just too much
17:38 <+bridge> [ddnet] <Learath2> it doesn't fit well on the scoreboard, the servers are never filled
17:40 <+bridge> [ddnet] <Vexar> @HamidReza585 you need to download chiller's map and autoexec_server.cfg
17:41 <+bridge> [ddnet] <Vexar> @Learath2 no i know but i think it's ganna be be better to have more slots and in client side it could be a scoreboard with scroll bar like samp i think 😄
17:42 <+bridge> [ddnet] <Learath2> well I don't like it and when I do projects I don't like I never finish them
17:42 <+bridge> [ddnet] <Learath2> you'll have to find someone else 🙂
17:43 <+bridge> [ddnet] <Vexar> yeah you right forget that
17:44 <+bridge> [ddnet] <Learath2> @HamidReza585 well msys2 works for me
17:45 <+bridge> [ddnet] <HamidReza585> let me test . . .
17:47 <+bridge> [ddnet] <Learath2> heh, virtualboxes implementation of opengl doesn't work too well with teeworlds rendering, but I can even run the built client
17:48 <+bridge> [ddnet] <HamidReza585> @Learath2 It generated some files
17:48 <+bridge> [ddnet] <HamidReza585> There is no exe file
17:49 <+bridge> [ddnet] <HamidReza585> @Learath2 Is it ok?
17:49 <+bridge> [ddnet] <Learath2> did cmake succeed?
17:49 <+bridge> [ddnet] <HamidReza585> Yes, but there is no exe
17:49 <+bridge> [ddnet] <Learath2> if it did succeed you can just do `make -j4` now
17:49 <+bridge> [ddnet] <heinrich5991> wait, virtualbox cannot even run teeworlds?
17:50 <+bridge> [ddnet] <Learath2> well might not be 4
17:50 <+bridge> [ddnet] <Learath2> however many cores you have 😛
17:50 <+bridge> [ddnet] <Learath2> @heinrich5991 it can render most of it, can't do the weird background
17:50 <+bridge> [ddnet] <Learath2> well I'm also using rdp, maybe that's the issue
17:51 <+bridge> [ddnet] <Learath2> virtualboxes native display interface is absolute shit
17:51 <+bridge> [ddnet] <Learath2> yeah even with that it can't do the background
17:52 <+bridge> [ddnet] <HamidReza585> It has 2 errors I think but generated the exe files
17:57 <+bridge> [ddnet] <Learath2> ah, I was supposed to merge that, forgot
17:59 <+bridge> [ddnet] <HamidReza585> @Learath2 Works great! thanks!
18:06 <+bridge> [ddnet] <HamidReza585> @Learath2 Have you updated the source code in github?
18:07 <+bridge> [ddnet] <HamidReza585> When I compile this one, it requires Update.
18:12 <+bridge> [ddnet] <Learath2> @HamidReza585 I think you should use git to download the source, not some zip
18:13 <+bridge> [ddnet] <HamidReza585> git clone https://github.com/ddnet/ddnet
18:13 <+bridge> [ddnet] <HamidReza585> this?
18:14 <+bridge> [ddnet] <Learath2> yes
18:14 <+bridge> [ddnet] <Learath2> after the clone, you need to do `git submodule init && git submodule update` to get ddnet-libs
18:18 <+bridge> [ddnet] <Learath2> I spent an entire day installing windows on a vm 😦
18:21 <+bridge> [ddnet] <Learath2> TIL, Windows 10 comes with sshd now. TIL, RDP actually works great
18:31 <+bridge> [ddnet] <Learath2> @heinrich5991 can you take a quick look at https://github.com/ddnet/ddnet/pull/2138 just need to check the cmake part
18:33 <+bridge> [ddnet] <heinrich5991> `add_c_compiler_flag_if_supported(OUR_FLAGS -mmacosx-version-min=10.7)` can we add something like that again?
18:33 <+bridge> [ddnet] <heinrich5991> or is that done by `CMAKE_OSX_DEPLOYMENT_TARGET`?
18:34 <+bridge> [ddnet] <Learath2> I think cmake takes care of all that
18:34 <+bridge> [ddnet] <heinrich5991> ok
18:35 <+bridge> [ddnet] <heinrich5991> @Learath2 what is the idea behind adding rpaths instead of changing them?
18:35 <+bridge> [ddnet] <Learath2> All bundled executables in macOS assume their frameworks are at ../Frameworks relative to themselves
18:36 <+bridge> [ddnet] <Learath2> which is `@loader_path/../Frameworks` which XCode adds to all it's built bundles
18:36 <+bridge> [ddnet] <Learath2> it also stops us from needing to modify other frameworks rpaths
18:36 <+bridge> [ddnet] <heinrich5991> ah
18:37 <+bridge> [ddnet] <heinrich5991> no
18:37 <+bridge> [ddnet] <Learath2> I used install_name_tool because I really couldn't figure out how to use cmakes BUILD_RPATH, I'm a little cmake stunted
18:37 <+bridge> [ddnet] <heinrich5991> so the libraries keep the rpath they already have?
18:38 <+bridge> [ddnet] <heinrich5991> e.g. if you build it with a system sdl, it might have a rpath that points directly there?
18:38 <+bridge> [ddnet] <Learath2> Yes
18:38 <+bridge> [ddnet] <heinrich5991> but that might interfere with loading, no?
18:38 <+bridge> [ddnet] <heinrich5991> if you keep that path
18:39 <+bridge> [ddnet] <Learath2> Interfere as in?
18:39 <+bridge> [ddnet] <heinrich5991> it might try to load a system SDL2 when we ship one in the bundle
18:41 <+bridge> [ddnet] <Learath2> System sdl has the same install name
18:41 <+bridge> [ddnet] <Learath2> If you compile with it the executable would still end up with its install name, not the system directory
18:41 <+bridge> [ddnet] <Learath2> But I can double check that
18:41 <+bridge> [ddnet] <Learath2> Dyld works in weird ways
18:50 <+bridge> [ddnet] <Learath2> @heinrich5991 now that I think about it that framework we ship is the same thing as the system framework
18:51 <+bridge> [ddnet] <Learath2> That didnt cause rpath issues
18:51 <+bridge> [ddnet] <heinrich5991> but we used `-change` before @Learath2
18:52 <+bridge> [ddnet] <Crying> @Learath2
18:52 <+bridge> [ddnet] <Learath2> No i mean when i built it after the change
18:52 <+bridge> [ddnet] <Crying> i can add your bot to server?
18:52 <+bridge> [ddnet] <Learath2> no
18:52 <+bridge> [ddnet] <Crying> :I
18:52 <+bridge> [ddnet] <Crying> sad
18:55 <+bridge> [ddnet] <Learath2> @heinrich5991 the framework itself indeed has the install name `@rpath/SDL2.framework/Versions/A/SDL2 (compatibility version 1.0.0, current version 12.0.0)`
18:55 <+bridge> [ddnet] <Learath2> that's what our executable links to
18:56 <+bridge> [ddnet] <Learath2> and in a bundle frameworks always end up in `@loader_path/../Frameworks`
18:56 <+bridge> [ddnet] <heinrich5991> okay, I'm not completely following, but I guess you know what you're doing
18:57 <+bridge> [ddnet] <Learath2> Which part did you not follow? it might be a sign of me thinking wrong
18:57 <+bridge> [ddnet] <Learath2> but dyld does work quite weirdly
18:58 <+bridge> [ddnet] <heinrich5991> okay. `@loader_path/../Frameworks` is something you observed in other bundles?
18:58 <+bridge> [ddnet] <heinrich5991> in ours?
18:58 <+bridge> [ddnet] <Learath2> In other bundles, xcode always adds that to all bundles that link to frameworks
18:59 <+bridge> [ddnet] <heinrich5991> okay
18:59 <+bridge> [ddnet] <heinrich5991> what is it with the `-change`, what did that do?
19:00 <+bridge> [ddnet] <heinrich5991> I guess change the actual dependencies in the executable?
19:01 <+bridge> [ddnet] <Learath2> We changed the rpath reference to the sdl lib and the hidapi reference in the sdl lib to absolute references starting at our executable_path
19:02 <+bridge> [ddnet] <Learath2> Instead of referring through rpath we referred to the library through a relative path from our executable
19:03 <+bridge> [ddnet] <Learath2> In mach-o linking is done with install names, the library knows its own install name and thats what you link to, the install name of the library, not just a name of the library
19:03 <+bridge> [ddnet] <heinrich5991> ah
19:03 <+bridge> [ddnet] <heinrich5991> (same for linux btw, I think)
19:04 <+bridge> [ddnet] <heinrich5991> with different nomenclature
19:04 <+bridge> [ddnet] <Learath2> Is it? I thought you only refer to so's with their name and version
19:04 <+bridge> [ddnet] <Learath2> In mach o the install name can even be an absolute path
19:04 <+bridge> [ddnet] <heinrich5991> ah, maybe that's different
19:04 <+bridge> [ddnet] <heinrich5991> idk
19:04 <+bridge> [ddnet] <heinrich5991> but it can definitely change the file name it links to
19:05 <+bridge> [ddnet] <Learath2> Anyway, when you build a framework, you make your install name relative to rpath
19:05 <+bridge> [ddnet] <heinrich5991> yea
19:05 <+bridge> [ddnet] <heinrich5991> makes sense
19:06 <+bridge> [ddnet] <Learath2> And apple developer guidelines say the frameworks in a bundle are always relative to loader path
19:06 <+bridge> [ddnet] <Learath2> E.g. when a framework links to another
19:09 <+bridge> [ddnet] <heinrich5991> yea, sounds good then
19:17 <+bridge> [ddnet] <nori> Is the maintainer of ddnet-git on aur here?
19:23 <+bridge> [ddnet] <Ryozuki> @nori what do u need
19:23 <+bridge> [ddnet] <Ryozuki> ah
19:23 <+bridge> [ddnet] <Ryozuki> antibot right
19:23 <+bridge> [ddnet] <Ryozuki> ill fix it now
19:24 <+bridge> [ddnet] <nori> well actually not that
19:24 <+bridge> [ddnet] <nori> Could u add libnotify as dependency?
19:25 <+bridge> [ddnet] <Ryozuki> oh yeah antibot should work in ddnet-git
19:25 <+bridge> [ddnet] <Ryozuki> yeah i can
19:33 <+bridge> [ddnet] <Ryozuki> @nori done
19:34 <+bridge> [ddnet] <Learath2> @heinrich5991 why do we use cmake -E in the cpack generator?
19:36 <+bridge> [ddnet] <heinrich5991> I'm not sure what the question is @Learath2
19:36 <+bridge> [ddnet] <heinrich5991> we use it because it does what we want
19:36 <+bridge> [ddnet] <heinrich5991> create a directory, copy something
19:37 <+bridge> [ddnet] <Learath2> doesn't cmake have a way to do that without calling cmake again?
19:37 <+bridge> [ddnet] <heinrich5991> no, don't think so
19:39 <+bridge> [ddnet] <Learath2> there is an issue if you link with the system framework turns out
19:39 <+bridge> [ddnet] <Learath2> cmake adds an rpath, we can remove it with CMAKE_INSTALL_SKIP_RPATH but we aren't installing the binary
19:49 <+bridge> [ddnet] <Learath2> and as always I'm alone
19:49 <+bridge> [ddnet] <Learath2> I'll just learn cmake
19:50 <+bridge> [ddnet] <heinrich5991> the problem is that we're not installing
19:51 <+bridge> [ddnet] <Ryozuki> cmake is not that dificult
19:51 <+bridge> [ddnet] <Ryozuki> it would be easier if we were allowed to use modern cmake :)
19:51 <+bridge> [ddnet] <heinrich5991> so old cmake is difficult?
19:51 <+bridge> [ddnet] <Ryozuki> its more verbose
19:52 <+bridge> [ddnet] <heinrich5991> I don't see an easy way to build with different rpaths depending on whether we want to run it from the target folder or want to bundle it
19:52 <+bridge> [ddnet] <heinrich5991> we could in theory make it dependent from the `-DDEV=ON` variable, but…
19:56 <+bridge> [ddnet] <Learath2> aren't we supposed to be installing into the directory before packing it?
19:56 <+bridge> [ddnet] <heinrich5991> I think we only do that when using cpack, but that doesn't work for crosscompiling into a bundle
19:56 <+bridge> [ddnet] <Learath2> are we even using cpack properly? I can't even use cpack
19:57 <+bridge> [ddnet] <heinrich5991> the `package` target is cpack, `package_*` is our own stuff
19:57 <+bridge> [ddnet] <Learath2> well that is broken `CPack Error: Could not create CPack generator: DMG`
20:04 <+bridge> [ddnet] <heinrich5991> we don't even test it in CI, I assume cpack for other platforms is broken as well
20:25 <+bridge> [ddnet] <Learath2> @heinrich5991 okay, can we maybe figure out what rpaths cmake itself decided to add?
20:26 <+bridge> [ddnet] <Learath2> if not I could just ship a script that removes all rpaths, we only want `@loader_path/../Frameworks` in the final bundle
20:26 <+bridge> [ddnet] <heinrich5991> that sounds good
20:55 <+bridge> [ddnet] <Learath2> `otool -l ./DDNet | grep -B1 -A2 "cmd LC_RPATH" | grep path | sed 's/^ *path \(.*\) (offset.*)$/\1/' | xargs -I '{}' install_name_tool -delete_rpath {} ./DDNet` how much would you hate this oneliner?
21:01 <+bridge> [ddnet] <heinrich5991> a bit
21:03 <+bridge> [ddnet] <Learath2> and what would you prefer? a python script? or a bash script that does ^^?
21:05 <+bridge> [ddnet] <heinrich5991> a python script
21:05 <+bridge> [ddnet] <heinrich5991> the above also looks like it breaks cross-compilation
21:08 <+bridge> [ddnet] <Learath2> why?
21:09 <+bridge> [ddnet] <Learath2> I mean it'll use ${CMAKE_INSTALL_NAME_TOOL} and a new one for OTOOL
21:09 <+bridge> [ddnet] <heinrich5991> but I guess it could be fixed
21:09 <+bridge> [ddnet] <heinrich5991> yea
21:10 <+bridge> [ddnet] <heinrich5991> I guess it would work as bash as well
21:10 <+bridge> [ddnet] <heinrich5991> eh I mean as the shell pipeline up there
21:11 <+bridge> [ddnet] <Learath2> just run that from inside cmake, or just put it in a file?
21:12 <+bridge> [ddnet] <heinrich5991> try inside cmake, dunno if it works
21:12 <+bridge> [ddnet] <heinrich5991> I think shell scripts are fragile and implicit, but if it works, it works
21:12 <+bridge> [ddnet] <Learath2> I can do python, if you tell me a good way to pass the paths to install_name_tool and otool to python
21:13 <+bridge> [ddnet] <heinrich5991> you can check scripts/dmg.py
21:13 <+bridge> [ddnet] <heinrich5991> I do it there, too (basically: use argparse)
21:14 <+bridge> [ddnet] <heinrich5991> `--dmgtools A B C` `--hdiutil H`
21:14 <+bridge> [ddnet] <heinrich5991> I thought I had a script to call install_name_tool, too, but I can't find it
21:15 <+bridge> [ddnet] <heinrich5991> ah, in teeworlds
21:15 <+bridge> [ddnet] <heinrich5991> scripts/darwin_change_dylib.py @Learath2
21:16 <+bridge> [ddnet] <heinrich5991> I guess you could argue that I take your hundred byte shell pipeline and transform it to a 70 line python script
21:16 <+bridge> [ddnet] <Learath2> well shell pipelines are fragile as you say
21:17 <+bridge> [ddnet] <Learath2> oh btw, do you think I should add your GetIntOrDefault patch into ddnet?
21:17 <+bridge> [ddnet] <heinrich5991> what do we need it for?
21:18 <+bridge> [ddnet] <heinrich5991> but if we do, sure? ^^
21:18 <+bridge> [ddnet] <Learath2> I added the 0.7 protocol files into the source so I can generate the protocol in a namespace
21:18 <+bridge> [ddnet] <heinrich5991> ah
21:18 <+bridge> [ddnet] <heinrich5991> nice
21:18 <+bridge> [ddnet] <heinrich5991> then sure
21:18 <+bridge> [ddnet] <Learath2> so I can actually safely unpack the messages
21:18 <+bridge> [ddnet] <Learath2> and have a way to refer to the msg ids without magic constants
21:19 <+bridge> [ddnet] <heinrich5991> sounds really good, I like it 🙂
22:08 <+bridge> [ddnet] <Crying> @Learath2
22:08 <+bridge> [ddnet] <Crying> Allowed russian in channels?
22:10 <+bridge> [ddnet] <heinrich5991> @Crying in #off-topic, I think
22:10 <+bridge> [ddnet] <Crying> :justatest:
22:27 <+bridge> [ddnet] <Learath2> @heinrich5991 https://gist.github.com/Learath2/c77c9b32e8ea6de86d72928404617525
22:28 <+bridge> [ddnet] <Learath2> python is a language that I'm not that great in, so it'd be nice if you could check this
22:31 <+bridge> [ddnet] <heinrich5991> @Learath2 can you give me example output of `otool -l`?
22:40 <+bridge> [ddnet] <Learath2> @heinrich5991 https://paste.pr0.tips/wu
22:47 <+bridge> [ddnet] <heinrich5991> @Learath2 LGTM. variable/function names are `snake_case` in python, I think
