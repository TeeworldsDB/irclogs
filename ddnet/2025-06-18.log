04:50 < bridge> <totar> I feel like conveying 2d side-profile water is hard
04:51 < bridge> <totar> maybe it could just be a solid color with some bubbles, also you can add a second layer to the surface like this
04:51 < bridge> <totar> https://cdn.discordapp.com/attachments/293493549758939136/1384727273843851264/image.png?ex=68537b45&is=685229c5&hm=a651e2d4534eab9cf6ccbd192e24c87d221a39fa6ad1c3d3063cb741fa6b0e69&
04:52 < bridge> <totar> another reference
04:52 < bridge> <totar> https://cdn.discordapp.com/attachments/293493549758939136/1384727415368061030/image.png?ex=68537b66&is=685229e6&hm=946fe5fc86cf603a026c0cfeeacb8fb5075cb3f9c141891ae22fe1bc2a3a8be7&
04:52 < bridge> <Ewan> https://tenor.com/view/skitchura-skitchura-d-sagusky-sagusky-d-luizdoro-gif-20449677
04:52 < bridge> <Ewan> just do spongebob background water
04:53 < bridge> <totar> the voronoi pattern can at least be stretched horizontally
04:53 < bridge> <totar> maybe also way bigger and then layered
05:30 < bridge> <louis> i liked 0.7 water pr water
05:33 < bridge> <louis> it had physics though
09:53 < bridge> <Assa> uhm yes, you can map whatever water you want, spongebob, something wavy, wider voronoi pattern, as I said the mapper can decide that in my implementation
09:53 < bridge> <Assa> I liked the 0.7 water pr as well, but I also see downsides on the approach taken (ignore the physics from now)
09:57 < bridge> <soulyvevo> @essigautomat do you have a github repo for this water animation somewhere
09:57 < bridge> <soulyvevo> i wanted to test it with my 30 layers of parallax water xd
10:14 < bridge> <Assa> yes, but it's a really dirty PR, there is a lot of other related stuff in there, I can send you the client or the link to the branch if you want
10:14 < bridge> <Assa> yes, but it's a really dirty PR, there is a lot of other unrelated stuff in there, I can send you the client or the link to the branch if you want
10:15 < bridge> <Assa> also I wasn't bothered to do the split right, currently all tilelayers are liquified xD
11:09 < bridge> <Solly (bun bun)> wheres the script to extract config variables from the .h file?
11:12 < bridge> <soulyvevo> pls send
11:12 < bridge> <soulyvevo> doesnt matter i just wanted to try it out for fun
13:10 < bridge> <ryanye2034_89716> https://cdn.discordapp.com/attachments/1384218380294291596/1384236008773652480/image.png?ex=6851b1be&is=6850603e&hm=bb06cdf48dad2445bb0398dd13fd2c172b64782b13963d4abc3c267d2605e297& https://cdn.discordapp.com/attachments/1384218380294291596/1384236737089241119/image.png?ex=6851b26b&is=685060eb&hm=5682da43ac62f6137395541139b373cf4db2f3dd085f5d2200353662c2f21485& https://cdn.discordapp.com/attachments/1384218380294291596/1384236767237898251/
13:27 < bridge> <soulyvevo> @essigautomat
13:27 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384857027997728862/water_anim.mp4?ex=6853f41c&is=6852a29c&hm=4ac4557bf454ce36967860debf540496c189d251dfa5f13decc44fbf6524f190&
13:27 < bridge> <soulyvevo> that last wave layer kinda looks like its dancing xd
13:30 < bridge> <soulyvevo> i changed shader values to be more subtle in this one
13:30 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384857849024479283/water_anim_2025-06-18_13-28-52aa.mp4?ex=6853f4e0&is=6852a360&hm=458fcece7439d2675f02135baa1a728e8e58fc56337f2d8288705bc599fb83ed&
13:32 < bridge> <zhn> will there be any water physics applied to this?
13:32 < bridge> <zhn> because looks like you can replicate it with quads + envs + clipping
13:37 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384859486287691776/water_anim_2025-06-18_13-36-22.mp4?ex=6853f666&is=6852a4e6&hm=3c6056c2da0640289271b7a1acd06a99dbcf1fcdaa2b34e95651bef7af5768eb&
13:38 < bridge> <soulyvevo> nah not really, look what it does to tiles
13:38 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384859793335910481/screenshot_2025-06-18_13-37-43.png?ex=6853f6b0&is=6852a530&hm=2e098cef57679fe164bf2d16cc2f72f12a81450b996631827aa5c7daa4dbde63&
13:38 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384859793725853717/screenshot_2025-06-18_13-38-13.png?ex=6853f6b0&is=6852a530&hm=3ef4ff0d9d0ee3511be96854004aee314467346c9156c57138d48164ba9b837d&
13:39 < bridge> <soulyvevo> normally you would need to do it frame by frame or something
13:47 < bridge> <Solly (bun bun)> why is there still memheap.cpp
13:48 < bridge> <Solly (bun bun)> i have heard that malloc is bad for frequent small allocs but cheap seems to be used for pretty unchanging memory allocation, and we avoid memory allocation every frame anyway
13:57 < bridge> <Jupstar ‚ú™> Wat?
13:57 < bridge> <Jupstar ‚ú™> Who is cheap
13:59 < bridge> <Solly (bun bun)> memheap*
14:00 < bridge> <zhn> nah i mean for texture itself, like one on upstream
14:03 < bridge> <Jupstar ‚ú™> I only see it used like 8 times in our code
14:03 < bridge> <Jupstar ‚ú™> And all of them don't sound like frequent use
14:04 < bridge> <Jupstar ‚ú™> Also it doesn't look like a malloc call but rather a cache
14:04 < bridge> <Jupstar ‚ú™> Ah yeah you want to remove it bcs it's only used rarely ok
14:05 < bridge> <Jupstar ‚ú™> Then I agree it's useless to have it
14:06 < bridge> <Jupstar ‚ú™> Is that with water physics or speedups?
14:06 < bridge> <soulyvevo> its a shader
14:07 < bridge> <Jupstar ‚ú™> I mean the tee movement
14:08 < bridge> <Assa> holy moly, that's the reason I need my own graphics designer ‚ù§Ô∏è
14:09 < bridge> <Assa> from the screenshot I take, that it's a tune zone
14:10 < bridge> <Assa> could be anything, air friction, anti gravity, infinite jumps ‚ù§Ô∏è
14:11 < bridge> <Assa> love the liquified gametiles :kek:
14:20 < bridge> <soulyvevo> tune_zone gravity -1
14:38 < bridge> <Assa> today I learned, that menu backgrounds don't have maplayer type `background` üòë
15:14 < bridge> <Assa> current master has insane fps, like I get constantly 4K everywhere
15:18 < bridge> <Assa> until you open the scoreboard in a full server üíÄ
15:36 < bridge> <kebscs> i mean its a 2007 game
15:41 < bridge> <Solly (bun bun)> text containers r expensive
15:49 < bridge> <Jupstar ‚ú™> Now install Linux and you have 8k fps xd
15:49 < bridge> <Jupstar ‚ú™> How much fps you have on full scoreboard?
15:54 < bridge> <Jupstar ‚ú™> Uhm, do we build in debug again for steam releases?
15:55 < bridge> <Jupstar ‚ú™> I get like almost 4k fps less on the steam version currently lol
15:55 < bridge> <Solly (bun bun)> steam overlay?
15:56 < bridge> <Jupstar ‚ú™> Yeah wtf
15:56 < bridge> <Jupstar ‚ú™> The fps counter changed visually
15:56 < bridge> <Jupstar ‚ú™> Wtf has valve done xD
15:57 < bridge> <Solly (bun bun)> bing bong
15:58 < bridge> <Jupstar ‚ú™> around 2900 fps on linear full scoreboard
15:58 < bridge> <Jupstar ‚ú™> https://cdn.discordapp.com/attachments/293493549758939136/1384894967188557834/image.png?ex=68541772&is=6852c5f2&hm=16ed17336d84e84aae83005448de67a05df2bd5b59f81138ed204644a0023f5c&
15:58 < bridge> <Jupstar ‚ú™> Now I try the non-beta client
15:59 < bridge> <Jupstar ‚ú™> Yeah maybe around 2600 fps
15:59 < bridge> <Jupstar ‚ú™> https://cdn.discordapp.com/attachments/293493549758939136/1384895334819561483/image.png?ex=685417c9&is=6852c649&hm=24bf31e63669039ca768b052642c27966c350abdb33f288813076bb8c3c84d9e&
16:30 < bridge> <Solly (bun bun)> ```cpp
16:30 < bridge> <Solly (bun bun)> static constexpr int BUF_SIZE = 64;
16:30 < bridge> <Solly (bun bun)> char s_aaaName[NUM_CONSOLETYPES][3][BUF_SIZE];
16:30 < bridge> <Solly (bun bun)> char s_aaaHelp[NUM_CONSOLETYPES][3][BUF_SIZE];
16:30 < bridge> <Solly (bun bun)> for(const auto &Instance : m_aInstances)
16:30 < bridge> <Solly (bun bun)> {
16:30 < bridge> <Solly (bun bun)>     char aInstanceName[32];
16:30 < bridge> <Solly (bun bun)>     int InstanceLength = str_find(Instance->m_pName, "_") - Instance->m_pName;
16:30 < bridge> <Solly (bun bun)>     auto &aaName = s_aaaName[Instance->m_Type];
16:30 < bridge> <Solly (bun bun)>     auto &aaHelp = s_aaaHelp[Instance->m_Type];
16:30 < bridge> <Solly (bun bun)>     str_truncate(aInstanceName, sizeof(aInstanceName), Instance->m_pName, InstanceLength);
16:30 < bridge> <Solly (bun bun)>     str_format(aaName[0], BUF_SIZE, "toggle_%s_console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     str_format(aaHelp[0], BUF_SIZE, "Toggle %s console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     Console()->Register(aaName[0], "", CFGFLAG_CLIENT, ConToggleConsole, Instance.get(), aaHelp[0]);
16:31 < bridge> <Solly (bun bun)>     str_format(aaName[1], BUF_SIZE, "clear_%s_console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     str_format(aaHelp[1], BUF_SIZE, "Clear %s console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     Console()->Register(aaName[1], "", CFGFLAG_CLIENT, ConClearConsole, Instance.get(), aaHelp[1]);
16:31 < bridge> <Solly (bun bun)>     str_format(aaName[2], BUF_SIZE, "dump_%s_console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     str_format(aaHelp[2], BUF_SIZE, "Dump %s console", aInstanceName);
16:31 < bridge> <Solly (bun bun)>     Console()->Register(aaName[2], "", CFGFLAG_CLIENT, ConDumpConsole, Instance.get(), aaHelp[2]);
16:31 < bridge> <Solly (bun bun)> }
16:31 < bridge> <Solly (bun bun)> 
16:31 < bridge> <Solly (bun bun)> for (int i = 0; i < NUM_CONSOLETYPES; ++i) {
16:31 < bridge> <Solly (bun bun)>     for (int j = 0; j < 3; ++j) {
16:31 < bridge> <Solly (bun bun)>         printf("s_aaaName[%d][%d] = \"%s\"\n", i, j, s_aaaName[i][j]);
16:31 < bridge> <Solly (bun bun)>     }
16:31 < bridge> <Solly (bun bun)> }
16:31 < bridge> <Solly (bun bun)> 
16:31 < bridge> <Solly (bun bun)> for (int i = 0; i < NUM_CONSOLETYPES; ++i) {
16:31 < bridge> <Solly (bun bun)>     for (int j = 0; j < 3; ++j) {
16:31 < bridge> <Solly (bun bun)>         printf("s_aaaHelp[%d][%d] = \"%s\"\n", i, j, s_aaaHelp[i][j]);
16:31 < bridge> <Solly (bun bun)> it prints out the right values, but the commands arent registered
16:31 < bridge> <Solly (bun bun)> ```cpp
16:31 < bridge> <Solly (bun bun)> s_aaaName[0][0] = "toggle_local_console"
16:31 < bridge> <Solly (bun bun)> s_aaaName[0][1] = "clear_local_console"
16:31 < bridge> <Solly (bun bun)> s_aaaName[0][2] = "dump_local_console"
16:31 < bridge> <Solly (bun bun)> s_aaaName[1][0] = "toggle_remote_console"
16:31 < bridge> <Solly (bun bun)> s_aaaName[1][1] = "clear_remote_console"
16:31 < bridge> <Solly (bun bun)> s_aaaName[1][2] = "dump_remote_console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[0][0] = "Toggle local console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[0][1] = "Clear local console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[0][2] = "Dump local console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[1][0] = "Toggle remote console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[1][1] = "Clear remote console"
16:32 < bridge> <Solly (bun bun)> s_aaaHelp[1][2] = "Dump remote console"
16:32 < bridge> <Solly (bun bun)> ```
16:32 < bridge> <robyt3> Those are temporary values
16:32 < bridge> <Solly (bun bun)> I THOUGHT I MADE THEM STATIC
16:32 < bridge> <Solly (bun bun)> (see the s_)
16:32 < bridge> <Solly (bun bun)> ty :)
16:32 < bridge> <Solly (bun bun)> works, ty :)
16:32 < bridge> <Solly (bun bun)> I THOUGHT I MADE THEM STATIC (see the s_)
16:32 < bridge> <Solly (bun bun)> its more lines than before, but it means i can just add another one easily x-x
16:32 < bridge> <Solly (bun bun)> which i want to do
16:33 < bridge> <Solly (bun bun)> (not for ddnet)
16:34 < bridge> <robyt3> Doesn't make it more readable for me though
16:34 < bridge> <robyt3> If you want it to me more generic then it should have been `toggle_console remote`
16:34 < bridge> <Solly (bun bun)> that wouldnt be backwards compatible though
16:35 < bridge> <Solly (bun bun)> can you think of a cleaner way of doing this
16:36 < bridge> <Assa> 1/3rd üíÄ
16:36 < bridge> <Assa> https://cdn.discordapp.com/attachments/293493549758939136/1384904538896465952/screenshot_2025-06-18_16-35-29.png?ex=6854205c&is=6852cedc&hm=d6aaa6fe8f3aaf53ba642fd60ff95d97ab1bc457692f31ffb60c97f0c0623bee&
16:36 < bridge> <Assa> https://cdn.discordapp.com/attachments/293493549758939136/1384904539404107857/screenshot_2025-06-18_16-35-32.png?ex=6854205c&is=6852cedc&hm=8280d4d952a0e1495ea666ad89e8f010286382f2dd55c31a168223371f3b0c64&
16:36 < bridge> <robyt3> The original
16:37 < bridge> <Assa> even If I zoom out and watch all of Multieasymap simultaniously, I still have more fps then open the scoreboard
16:39 < bridge> <Solly (bun bun)> -# \#7777 mentioned
16:39 < bridge> <Solly (bun bun)> whilst making it easy to add more
16:39 < bridge> <DDNet> https://github.com/ddnet/ddnet/issues/7777
16:41 < bridge> <robyt3> This doesn't really make it easier to add more. Copying 3 lines to register command handlers for another console is easier than understanding this code.
16:42 < bridge> <Jupstar ‚ú™> One problem is simply that we have many render calls. for every text one
16:42 < bridge> <Jupstar ‚ú™> Batching them would defs improve fps
16:42 < bridge> <Jupstar ‚ú™> But honestly. >1000 fps is still better than anything u need xdd
16:42 < bridge> <Solly (bun bun)> would reordering them be fine
16:43 < bridge> <robyt3> Why? They are sorted already
16:43 < bridge> <Solly (bun bun)> and keeping the pUser now takes an instance instead of this so the Cons dont have to be duplicated
16:43 < bridge> <Solly (bun bun)> so that new ones are at the end
16:43 < bridge> <Solly (bun bun)> not that there will be any changes to this code
16:45 < bridge> <robyt3> I suppose it makes sense to move the command handlers inside `CInstance` to remove the duplication, but then I would also move the command registration inside `CInstance::Init`
16:46 < bridge> <robyt3> Each console should register its own commands
16:46 < bridge> <Solly (bun bun)> is onconsoleinit not meant to be used for console init?
16:46 < bridge> <robyt3> Each console instance should register its own commands
16:46 < bridge> <Solly (bun bun)> oh right
16:46 < bridge> <Solly (bun bun)> i do like that
16:46 < bridge> <robyt3> `CGameConsole::OnConsoleInit` calls `m_LocalConsole.Init(this)`
16:46 < bridge> <Solly (bun bun)> is onconsoleinit not meant to be used for commands  init?
16:46 < bridge> <robyt3> But you also need to move `m_pConsole = Kernel()->RequestInterface<IConsole>();` up or this won't be initialized
16:46 < bridge> <Solly (bun bun)> yes
16:47 < bridge> <robyt3> I also tried to add a third console type already, but I got stuck having to implement the actual econ client backend
16:47 < bridge> <Assa> future PR: text grouping :pepeW:
16:47 < bridge> <Solly (bun bun)> so have i, i also got stuck at the implementation of what it was
16:47 < bridge> <Solly (bun bun)> i still would like to make the process easier
16:48 < bridge> <Solly (bun bun)> i also got stuck at the implementation of what it was
16:48 < bridge> <Jupstar ‚ú™> Well ig not only render calls. generally we don't cache text, so every frame we go through all chars etc.
16:49 < bridge> <Jupstar ‚ú™> Maybe somehow caching them would already help tons
16:49 < bridge> <Assa> I am already scared
16:50 < bridge> <Solly (bun bun)> this still means having member strings for the commands which i find dirty
16:50 < bridge> <robyt3> How much additional memory would text containers end up using if we used them everywhere?
16:50 < bridge> <Solly (bun bun)> only as much as the scoreboard uses when active
16:50 < bridge> <Solly (bun bun)> minus the realloc every frame
16:51 < bridge> <Jupstar ‚ú™> I dunno, 24bytes per character or smth?
16:51 < bridge> <soulyvevo> lol i always thought its the mini tees that eat all that fps, not text
16:51 < bridge> <Solly (bun bun)> the tees are like 10 quads
16:51 < bridge> <Solly (bun bun)> even if immediate 600 quads is fine
16:51 < bridge> <Assa> ofc they also have an impact, but I always knew that text was tanking it
16:52 < bridge> <Assa> with my latest PR we can render a million quads without impact
16:52 < bridge> <Assa> with my latest PR we can render a million quads without (much) impact
16:52 < bridge> <soulyvevo> was it merged?
16:52 < bridge> <Assa> yes
16:52 < bridge> <soulyvevo> does it affect all quads on all maps or how does it work
16:53 < bridge> <Assa> well, _maybe_
16:53 < bridge> <Assa> it optimizes rendering, if all quads have the same envs
16:53 < bridge> <Assa> meaning if all quads have no env, or all quads have the same color AND position env AND offsets
16:53 < bridge> <soulyvevo> wait this might be huge actually
16:53 < bridge> <soulyvevo> lemmie test on my stars spam map
16:54 < bridge> <Assa> i know
16:54 < bridge> <robyt3> `sizeof(STextCharQuad) == 80` :justatest:
16:54 < bridge> <Assa> I must say it was jupeeys idea, since he already did that in ddnet-rs, I was just the one willing to implement it
16:54 < bridge> <Jupstar ‚ú™> Now the question is, how many chars are there that we want to cache
16:54 < bridge> <robyt3> This contains the color for each vertex separately, is that really necessary?
16:54 < bridge> <Jupstar ‚ú™> 80 * 1000
16:54 < bridge> <Jupstar ‚ú™> 
16:54 < bridge> <Jupstar ‚ú™> would only be 80 KiB
16:54 < bridge> <Jupstar ‚ú™> 80 * 1000
16:54 < bridge> <Jupstar ‚ú™> 
16:54 < bridge> <Jupstar ‚ú™> would only be 80 KB
16:54 < bridge> <Jupstar ‚ú™> 80 * 1000
16:54 < bridge> <Jupstar ‚ú™> 
16:55 < bridge> <Jupstar ‚ú™> would only be 80 kB
16:55 < bridge> <Assa> I know you're doing some inline/outline stuff, good question
16:55 < bridge> <Jupstar ‚ú™> Well the opposite would be 1 color per draw call
16:55 < bridge> <Jupstar ‚ú™> You cannot easily do one color per char
16:55 < bridge> <Jupstar ‚ú™> You currently can create one text container with different colors
16:56 < bridge> <Jupstar ‚ú™> Dunno if we use that somewhere
16:56 < bridge> <robyt3> ```cpp
16:56 < bridge> <robyt3> struct STextCharQuadVertex
16:56 < bridge> <robyt3> {
16:56 < bridge> <robyt3>     STextCharQuadVertex()
16:56 < bridge> <robyt3>     {
16:56 < bridge> <robyt3>         m_Color.r = m_Color.g = m_Color.b = m_Color.a = 255;
16:56 < bridge> <robyt3>     }
16:56 < bridge> <robyt3>     float m_X, m_Y;
16:56 < bridge> <robyt3>     // do not use normalized floats as coordinates, since the texture might grow
16:56 < bridge> <robyt3>     float m_U, m_V;
16:56 < bridge> <robyt3>     STextCharQuadVertexColor m_Color;
16:56 < bridge> <robyt3> };
16:56 < bridge> <robyt3> 
16:56 < bridge> <robyt3> struct STextCharQuad
16:56 < bridge> <robyt3> {
16:57 < bridge> <robyt3>     STextCharQuadVertex m_aVertices[4];
16:57 < bridge> <robyt3> };
16:57 < bridge> <robyt3> ```
16:57 < bridge> <robyt3> But why store the color for each `STextCharQuadVertex` and not once for each `STextCharQuad`?
16:57 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384909754643779664/image.png?ex=68542537&is=6852d3b7&hm=011f013c458d8bebd913037b1ef2c811c8b612bbc9a37c2cf776dbc08f717738&
16:57 < bridge> <Assa> I know broadcasts had a feautre for colored texts, like "^900 red ^009 blue" stuff
16:57 < bridge> <Jupstar ‚ú™> Bcs that is not how it works.
16:57 < bridge> <Jupstar ‚ú™> 
16:57 < bridge> <Jupstar ‚ú™> On the GPU you can only stream vertices
16:57 < bridge> <Jupstar ‚ú™> Not structs
16:57 < bridge> <robyt3> I see, that's kind of what I was expecting already
16:57 < bridge> <Jupstar ‚ú™> Which doesn't mean it's generally impossible.. It's possible since OpenGL 4.3 or smth with shader storage buffers
16:58 < bridge> <Jupstar ‚ú™> https://www.khronos.org/opengl/wiki/Shader_Storage_Buffer_Object
16:59 < bridge> <ryozuki> test
16:59 < bridge> <Jupstar ‚ú™> test passed ‚úÖ
17:00 < bridge> <ryozuki> adopt the tee discord tag
17:00 < bridge> <Jupstar ‚ú™> Done ‚òëÔ∏è
17:00 < bridge> <Assa> be in mind, that people with ogl1 don't benefit from this and might be unable to play the map if you do too much quads
17:01 < bridge> <Assa> keep in mind, that people with ogl1 don't benefit from this and might be unable to play the map if you do too much quads
17:01 < bridge> <Assa> one more reason to drop ogl1 üôà
17:01 < bridge> <ryozuki> drop ogl3 too
17:01 < bridge> <Jupstar ‚ú™> ogl 3.0 also doesn't profit from it
17:01 < bridge> <ryozuki> allow only vulkan 1.3
17:01 < bridge> <Jupstar ‚ú™> Yes
17:01 < bridge> <Jupstar ‚ú™> :deen_star:
17:01 < bridge> <Jupstar ‚ú™> Only Vulkan 1.4
17:01 < bridge> <ryozuki> :deen_star:
17:01 < bridge> <Assa> ogl3.3 does profit from it
17:02 < bridge> <Solly (bun bun)> ```cp
17:02 < bridge> <Solly (bun bun)> void CGameConsole::CInstance::Init(CGameConsole *pGameConsole)
17:02 < bridge> <Solly (bun bun)> {
17:02 < bridge> <Solly (bun bun)>     m_pGameConsole = pGameConsole;
17:02 < bridge> <Solly (bun bun)> 
17:02 < bridge> <Solly (bun bun)>     char aInstanceName[32];
17:02 < bridge> <Solly (bun bun)>     int InstanceLength = str_find(m_pName, "_") - m_pName;
17:02 < bridge> <Solly (bun bun)>     str_truncate(aInstanceName, sizeof(aInstanceName), m_pName, InstanceLength);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandNames[0], BUF_SIZE, "toggle_%s_console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandHelps[0], BUF_SIZE, "Toggle %s console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     pGameConsole->Console()->Register(m_aaCommandNames[0], "", CFGFLAG_CLIENT, ConToggleConsole, Instance.get(), m_aaCommandHelps[0]);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandNames[1], BUF_SIZE, "clear_%s_console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandHelps[1], BUF_SIZE, "Clear %s console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     pGameConsole->Console()->Register(m_aaCommandNames[1], "", CFGFLAG_CLIENT, ConClearConsole, Instance.get(), m_aaCommandHelps[1]);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandNames[2], BUF_SIZE, "dump_%s_console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     str_format(m_aaCommandHelps[2], BUF_SIZE, "Dump %s console", aInstanceName);
17:02 < bridge> <Solly (bun bun)>     pGameConsole->Console()->Register(m_aaCommandNames[2], "", CFGFLAG_CLIENT, ConDumpConsole, Instance.get(), m_aaCommandHelps[2]);
17:02 < bridge> <Solly (bun bun)> }
17:02 < bridge> <Solly (bun bun)> ```
17:02 < bridge> <Solly (bun bun)> @robyt3 this is not much better
17:02 < bridge> <Solly (bun bun)> im gonna change m_pName to just be "local" not "local_console" so it will be a bit smaller
17:02 < bridge> <soulyvevo> i opened the game with ogl3.3 and some bg quads were fully dark but anyway
17:02 < bridge> <soulyvevo> @essigautomat DAMN I GET 2x fps
17:02 < bridge> <Assa> send map
17:02 < bridge> <ryozuki> - drop all ogl
17:02 < bridge> <ryozuki> - drop windows
17:02 < bridge> <ryozuki> - drop macos
17:03 < bridge> <ryozuki> - drop 0.7 compat
17:03 < bridge> <ryozuki> - drop pre 19.0 backwards compat stuff
17:03 < bridge> <ryozuki> - drop all ogl
17:03 < bridge> <ryozuki> - drop windows
17:03 < bridge> <ryozuki> - drop macos
17:03 < bridge> <ryozuki> - drop 0.7 compat
17:03 < bridge> <ryozuki> - drop pre 19.2.1 backwards compat stuff
17:03 < bridge> <Jupstar ‚ú™> Do you self build?
17:03 < bridge> <Jupstar ‚ú™> The future is so bright
17:03 < bridge> <soulyvevo> i downloaded from here https://github.com/ddnet/ddnet/actions/runs/15717138449
17:03 < bridge> <Solly (bun bun)> lmao, random pr
17:03 < bridge> <Solly (bun bun)> lmao, what r the chances
17:03 < bridge> <Jupstar ‚ú™> Then that would be a bug
17:04 < bridge> <Jupstar ‚ú™> If you also copied data dir
17:04 < bridge> <robyt3> I think hard-coding the strings is more readable. This also wouldn't work with the script parsing console commands
17:04 < bridge> <soulyvevo> i just choose most recent master when i update the game xd
17:04 < bridge> <Assa> the PR doesn't necessarily have this change, it might merge without conflicts, but can be based on an older version
17:04 < bridge> <Solly (bun bun)> oh dear, i thoughtit just opened the game and did something
17:04 < bridge> <Assa> the PR doesn't necessarily have this change, it might merge without conflicts, but can be based on an older version, can't tell
17:04 < bridge> <ryozuki> i play on master too
17:04 < bridge> <ryozuki> all devs should play on master
17:04 < bridge> <ryozuki> to debug
17:04 < bridge> <ryozuki> find bugs
17:05 < bridge> <Solly (bun bun)> this would also make the functional version of register not work
17:05 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384911954384257095/bg3_2025-06-18_17-02-53.mp4?ex=68542744&is=6852d5c4&hm=4c420d1f1a15014c39ebd72c3fcc488c34e2b1a54e95235de32dc8a7a9699e82&
17:05 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384911954862411877/bg2.map?ex=68542744&is=6852d5c4&hm=8ccdcb03c76a2e4efb445c70709ed9ebed898eed2a6f753d5e1d7df857b3d2fa&
17:05 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384911955185106944/bg3.map?ex=68542744&is=6852d5c4&hm=db4fdb6df70990c45637139017c1fcecceb5c907a30ebb464b5a0dcdac9566a7&
17:06 < bridge> <robyt3> Why? You need to pass the command name and help text to the console instance constructor then
17:06 < bridge> <robyt3> Oh yeah, that wouldn't work...
17:06 < bridge> <soulyvevo> i get 1800 fps on the new version and 800 fps on 19.0
17:06 < bridge> <soulyvevo> thats crazy increase
17:06 < bridge> <ryozuki> pog
17:06 < bridge> <Solly (bun bun)> well you would have to change the script, but it would work
17:06 < bridge> <Assa> 3.8K with twitch open
17:06 < bridge> <Assa> https://cdn.discordapp.com/attachments/293493549758939136/1384912266893328444/screenshot_2025-06-18_17-06-33.png?ex=6854278e&is=6852d60e&hm=89112915fa89204920f025b792f53a1e66320f6e99a675031261d9bd78a05220&
17:06 < bridge> <Solly (bun bun)> the intention of the functional thing thoughh is to reduce repetition
17:07 < bridge> <robyt3> I did something like that for 0.7 to export commands
17:07 < bridge> <Solly (bun bun)> can we switch to that aswell?
17:07 < bridge> <soulyvevo> try the other one, its animated
17:07 < bridge> <Assa> 3.8K with twitch and chat open, else 5K
17:07 < bridge> <Assa> https://cdn.discordapp.com/attachments/293493549758939136/1384912266893328444/screenshot_2025-06-18_17-06-33.png?ex=6854278e&is=6852d60e&hm=89112915fa89204920f025b792f53a1e66320f6e99a675031261d9bd78a05220&
17:07 < bridge> <Solly (bun bun)> the intention of the functional thing thoughh is to reduce repetition, by having loops of registers with different captures and stuff
17:07 < bridge> <Assa> there I only get 1.4 K
17:07 < bridge> <Solly (bun bun)> the fact you have to manage the string memory is a bit annoying though for this
17:07 < bridge> <Solly (bun bun)> as i now have found
17:07 < bridge> <ryozuki> i wonder when we (by mistake) will add a map feature that makes it turing complete, and someone does doom in it
17:08 < bridge> <ryozuki> can u do a sr latch with switches
17:08 < bridge> <Solly (bun bun)> you dont have enuf switches to do anything
17:08 < bridge> <ryozuki> rip
17:09 < bridge> <Solly (bun bun)> we really need a higher level compiler to ddnet switches lmao
17:09 < bridge> <Solly (bun bun)> then up the switch limit to 32bit
17:11 < bridge> <Solly (bun bun)> @robyt3 you know what i could do, im planning on making each instance inherited so i can have on each constructor the seperate commands
17:11 < bridge> <Solly (bun bun)> its not much better actually you still have to write everything out, but you get to use this for pUser still
17:11 < bridge> <Assa> technically we can already set 1 quad per screen pixel and teleport the player around really fast, playing the shrek movie
17:12 < bridge> <robyt3> I'd move the command handlers to `CInstance` but register the commands in `CConsole::OnConsoleInit`
17:15 < bridge> <Assa> as I said, (time)offsets and envs need to be the same, an algorithm chunking the quads of a layer into groups is not implemented. If you see the need for this, feel free to implement it :justatest:
17:15 < bridge> <Solly (bun bun)> thats kinda weird
17:16 < bridge> <robyt3> Seems like the only way that works with the correct script
17:18 < bridge> <robyt3> Otherwise you'd first have to add `dump_X` commands to dump lists of all commands etc. as json, then write a converter from that json to the HTML on the website. I also rewrote the script recently because it had various issues: https://github.com/ddnet/ddnet/pull/10194
17:18 < bridge> <Jupstar ‚ú™> On these maps you get black quads with OGL 3.3?
17:19 < bridge> <soulyvevo> it was on autumn menu theme
17:19 < bridge> <soulyvevo> and only the background quad
17:19 < bridge> <soulyvevo> the clouds were fine
17:20 < bridge> <soulyvevo> tho i cant seem to replicate it now no idea whats going on
17:20 < bridge> <Jupstar ‚ú™> Alr
17:20 < bridge> <Jupstar ‚ú™> If it happens again check F1 logs üòÑ
17:21 < bridge> <soulyvevo> i can check log file
17:21 < bridge> <soulyvevo> sec
17:21 < bridge> <Assa> can not reproduce
17:22 < bridge> <Assa> I am on the other hand a bit concerned how maplayers are initialized
17:22 < bridge> <Assa> maybe something on your device was not ready or something when the game starts
17:37 < bridge> <soulyvevo> whats the first line in logs should be when starting the client
17:38 < bridge> <soulyvevo> because it looks like i reopened another client on the same second and im confused
17:38 < bridge> <robyt3> `engine: running on`
17:38 < bridge> <robyt3> Unless you are on Android
17:40 < bridge> <soulyvevo> ```
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I engine: running on windows-win64-amd64
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I engine: arch is little endian
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I engine: operating system version: Windows 10.0.26100.4202
17:40 < bridge> <soulyvevo> ```
17:40 < bridge> <soulyvevo> ```
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I http: libcurl version 8.8.0 (compiled = 8.8.0)
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I sdl: SDL version 2.30.5 (compiled = 2.30.5)
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:42 I gfx: Created OpenGL 3.3 context
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:43 I opengl: Vendor string: NVIDIA Corporation
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:43 I opengl: Version string: 3.3.0 NVIDIA 572.70
17:40 < bridge> <soulyvevo> ```
17:40 < bridge> <soulyvevo> i think its this one
17:40 < bridge> <soulyvevo> ```
17:40 < bridge> <soulyvevo> 0(11) : error C1307: non constant expression for array size
17:40 < bridge> <soulyvevo> 0(12) : error C1503: undefined variable "TW_MAX_QUADS"
17:40 < bridge> <soulyvevo> 0(12) : error C1307: non constant expression for array size
17:40 < bridge> <soulyvevo> 
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:43 I glsl: shader/quad.frag: 0(7) : error C1503: undefined variable "TW_MAX_QUADS"
17:40 < bridge> <soulyvevo> 0(7) : error C1307: non constant expression for array size
17:40 < bridge> <soulyvevo> 
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:43 I glslprogram: Error! Shader program wasn't linked! The linker returned:
17:40 < bridge> <soulyvevo> 
17:40 < bridge> <soulyvevo> 
17:40 < bridge> <soulyvevo> 2025-06-18 16:57:43 I glsl: shader/quad.vert: 0(12) : error C1503: undefined variable "TW_MAX_QUADS"
17:40 < bridge> <soulyvevo> 0(12) : error C1307: non constant expression for array size
17:40 < bridge> <soulyvevo> 0(13) : error C1503: undefined variable "TW_MAX_QUADS"
17:41 < bridge> <soulyvevo> 0(13) : error C1307: non constant expression for array size
17:41 < bridge> <soulyvevo> 
17:41 < bridge> <soulyvevo> 2025-06-18 16:57:43 I glsl: shader/quad.frag: 0(8) : error C1503: undefined variable "TW_MAX_QUADS"
17:41 < bridge> <soulyvevo> 0(8) : error C1307: non constant expression for array size
17:41 < bridge> <soulyvevo> 
17:41 < bridge> <soulyvevo> 2025-06-18 16:57:43 I glslprogram: Error! Shader program wasn't linked! The linker returned:
17:41 < bridge> <soulyvevo> ```
17:41 < bridge> <Jupstar ‚ú™> That is the important log
17:41 < bridge> <soulyvevo> `2025-06-18 16:57:50 I client: saved screenshot to 'C:\Users\souly\AppData\Roaming/Teeworlds/screenshots/screenshot_2025-06-18_16-57-50.png'` 
17:41 < bridge> <soulyvevo> i made a screenshot after this so it should be this i guess
17:41 < bridge> <soulyvevo> https://cdn.discordapp.com/attachments/293493549758939136/1384920888029216828/screenshot_2025-06-18_16-57-50.png?ex=68542f96&is=6852de16&hm=1ea6d3a93995ed79271159b47861fdb019685f15385026a07edff45e0e12208d&
17:41 < bridge> <Assa> oO
17:41 < bridge> <soulyvevo> i cant reproduce rn tho
17:41 < bridge> <Jupstar ‚ú™> If you are 100% sure you copied the data dir correctly that time.
17:41 < bridge> <Jupstar ‚ú™> 
17:41 < bridge> <Jupstar ‚ú™> Then it's a bug
17:41 < bridge> <Jupstar ‚ú™> Otherwise it was a data mismatch in the shader files
17:42 < bridge> <soulyvevo> i reopened the client with vulcan after that and it worked fine
17:42 < bridge> <Jupstar ‚ú™> So you can still reproduce the bug in OGL 3.3 potentially?
17:42 < bridge> <soulyvevo> but now even when i change the rendered to opg3.3 i cant reproduce no idea why
17:42 < bridge> <Jupstar ‚ú™> Ok
17:42 < bridge> <Jupstar ‚ú™> Well then... we'll never know
17:42 < bridge> <Jupstar ‚ú™> ü´†
17:43 < bridge> <soulyvevo> :feelsbadman:
17:43 < bridge> <robyt3> Does Windows cache the shaders already?
17:43 < bridge> <Jupstar ‚ú™> If it does, then it would at least take like a sha or smth
17:43 < bridge> <Jupstar ‚ú™> I doubt they just cache random files by name xD
17:44 < bridge> <soulyvevo> i was messing up with shaders by assa but it was all in another folder so idk
17:44 < bridge> <soulyvevo> but i guess it shouldnt be related since it didnt touch quads
17:45 < bridge> <robyt3> https://developer.nvidia.com/docs/drive/drive-os/6.0.9/public/drive-os-linux-sdk/common/topics/graphics_content/AutomaticShaderCache8.html
17:45 < bridge> <robyt3> Doesn't say they hash the shader contents
17:45 < bridge> <Jupstar ‚ú™> Well they say shader source
17:46 < bridge> <Jupstar ‚ú™> They don't have file access
17:46 < bridge> <Jupstar ‚ú™> They don't even have a name for the shader
17:46 < bridge> <Jupstar ‚ú™> Just source code
17:46 < bridge> <Jupstar ‚ú™> So actually it's probs impossible
17:47 < bridge> <robyt3> True. No idea if it wasn't a mismatched data dir then though
17:48 < bridge> <Assa> at least from a code pov this should have not happened as far as I can tell
17:51 < bridge> <Jupstar ‚ú™> Since it was in the menu we'll notice sooner or later if this is really a bug
17:52 < bridge> <Jupstar ‚ú™> It's autumn soon too üçÉ
17:52 < bridge> <robyt3> Good testing methodology
18:08 < bridge> <Assa> summer theme is almost the same
18:52 < bridge> <teero777> woah cool
18:52 < bridge> <teero777> https://cdn.discordapp.com/attachments/293493549758939136/1384938956029689987/image.png?ex=6854406a&is=6852eeea&hm=aca3bdff50c97eec25d654b64e6caab86fea96b97ae559209f3d16208798762a&
18:54 < bridge> <gorp_tw> tee
18:54 < bridge> <teero777> tee
18:54 < bridge> <soulyvevo> tee
18:54 < bridge> <gorp_tw> kinda cool actually if you're in other discords
18:54 < bridge> <gorp_tw> free ads
18:55 < bridge> <Assa> sorry I only run on coffee
18:55 < bridge> <gorp_tw> i want coffee
18:55 < bridge> <Assa> and not on nitro
18:55 < bridge> <gorp_tw> u dont need nitro
18:59 < bridge> <Assa> but it seems you need the desktop app
18:59 < bridge> <Assa> if I change my server name to Assassin now, I went full circle after 16 years and am AssassinTee again
19:00 < bridge> <Assa> if I change my server name to Assassin now, I would have gone full circle after 16 years and am AssassinTee again
19:00 < bridge> <Assa> if I change my server name to Assassin now, I would have gone full circle after 16 years and be AssassinTee again
19:00 < bridge> <gorp_tw> weird
19:00 < bridge> <gorp_tw> for me I can't remember where I found it on mobile
19:00 < bridge> <gorp_tw> but discord is so ass anyway idc
19:05 < bridge> <teero777> works in brower
19:05 < bridge> <teero777> works in browser
19:11 < bridge> <Assa> There is imo a translation error, a name tag is not a server tag, these are server tags ... that get attached to names
19:11 < bridge> <Assa> found where I can do this in the app
19:25 < bridge> <Jupstar ‚ú™> Teewelten
19:36 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384950002580983941/image.png?ex=68544ab3&is=6852f933&hm=0134429806d8271e4a6552334d43727c6d0aa8167d66f2bc142faa6bdfab1d63&
19:36 < bridge> <Solly (bun bun)> i have never used this feature D:
19:38 < bridge> <Jupstar ‚ú™> They are getting more annoying about this shit xd
19:39 < bridge> <Jupstar ‚ú™> got an email a while ago
19:39 < bridge> <Jupstar ‚ú™> https://cdn.discordapp.com/attachments/293493549758939136/1384950579394248826/image.png?ex=68544b3d&is=6852f9bd&hm=eb3658064436fb0af5f859d54a5d01a3c211e09bf651d82adb34f1f314703ddd&
19:51 < bridge> <kebscs> why is open red
19:54 < bridge> <Solly (bun bun)> im special
20:01 < bridge> <Assa> @soulyvevo which of the water implementations would be your favourite?
20:14 < bridge> <Solly (bun bun)> ```cpp
20:14 < bridge> <Solly (bun bun)> if(m_Type != CONSOLETYPE_REMOTE || m_pGameConsole->Client()->RconAuthed())
20:14 < bridge> <Solly (bun bun)> {
20:14 < bridge> <Solly (bun bun)>     const char *pPrevEntry = m_History.Last();
20:14 < bridge> <Solly (bun bun)>     if(pPrevEntry == nullptr || str_comp(pPrevEntry, pLine) != 0)
20:14 < bridge> <Solly (bun bun)>     {
20:14 < bridge> <Solly (bun bun)>         const size_t Size = str_length(pLine) + 1;
20:14 < bridge> <Solly (bun bun)>         char *pEntry = m_History.Allocate(Size);
20:14 < bridge> <Solly (bun bun)>         str_copy(pEntry, pLine, Size);
20:14 < bridge> <Solly (bun bun)>     }
20:14 < bridge> <Solly (bun bun)>     // print out the user's commands before they get run
20:14 < bridge> <Solly (bun bun)>     char aBuf[IConsole::CMDLINE_LENGTH + 3];
20:14 < bridge> <Solly (bun bun)>     str_format(aBuf, sizeof(aBuf), "> %s", pLine);
20:14 < bridge> <Solly (bun bun)>     m_pGameConsole->PrintLine(m_Type, aBuf);
20:15 < bridge> <Solly (bun bun)> }
20:15 < bridge> <Solly (bun bun)> ```
20:15 < bridge> <Solly (bun bun)> whats the point of ` if(pPrevEntry == nullptr || str_comp(pPrevEntry, pLine) != 0)`
20:15 < bridge> <Ewan> what is m_History
20:15 < bridge> <Ewan> maybe it just doesn't check on return
20:15 < bridge> <Solly (bun bun)> sorry took a while
20:15 < bridge> <Solly (bun bun)> it just doesnt allocate a new string
20:15 < bridge> <Solly (bun bun)> if the last history item is the same
20:15 < bridge> <Solly (bun bun)> smort
20:15 < bridge> <Ewan> o yea
21:02 < bridge> <soulyvevo> what are the other ones besides these shaders from today
21:08 < bridge> <kebscs> https://cdn.discordapp.com/attachments/293493549758939136/1384972986406277261/434077547-9c87e92a-d461-4f0a-b2f2-e66f91a2b67b.mp4?ex=6854601b&is=68530e9b&hm=e085a327aa533471f8bd3a69d5f32893d3babfac0f6516e1603ea2e31bd1ccfe&
21:08 < bridge> <Solly (bun bun)> i like new things which arent just tune zones
21:13 < bridge> <soulyvevo> okay hear me out
21:13 < bridge> <soulyvevo> i want both
21:14 < bridge> <soulyvevo> i thought of making some funny black holes/space rifts or whatever with the shader one
21:15 < bridge> <soulyvevo> we need more stuff like that tbh
21:15 < bridge> <soulyvevo> i want fancy animated tiles
21:31 < bridge> <Ewan> what does ddnet even do with websockets
21:31 < bridge> <Ewan> i had no idea they were in the game
21:31 < bridge> <Solly (bun bun)> web client
21:32 < bridge> <Ewan> wdym
21:32 < bridge> <Solly (bun bun)> roby for some reason really wants to get ddnet working on web
21:32 < bridge> <Ewan> idk how is the latency on a webgl based client
21:32 < bridge> <Ewan> i've never tried anything interactive like that
21:32 < bridge> <Ewan> would it be usable
21:32 < bridge> <Solly (bun bun)> probbaly
21:32 < bridge> <Solly (bun bun)> its just a bit annoying since you are forced to use tcp
21:33 < bridge> <Ewan> i mean
21:33 < bridge> <robyt3> I finished the Tutorial in a web browser
21:33 < bridge> <Ewan> awesome
21:33 < bridge> <Ewan> was it tolerable
21:33 < bridge> <Solly (bun bun)> would be much easier to convince friends to play
21:33 < bridge> <Solly (bun bun)> if i could just say go https://ddnet.org/play
21:33 < bridge> <robyt3> easier than mobile
21:33 < bridge> <robyt3> the only problem is that you always need to press escape twice
21:33 < bridge> <robyt3> because first escape is always caught by the browser to undo fullscreen
21:34 < bridge> <Solly (bun bun)> can you rebind the escape key to something else
21:34 < bridge> <Ewan> yeah that's annoying
21:34 < bridge> <Solly (bun bun)> like use tilde
21:34 < bridge> <Ewan> theoretically
21:34 < bridge> <robyt3> not right now, we'd need to be able to rebind escape to something else
21:34 < bridge> <robyt3> also for better gamecontroller support
21:34 < bridge> <Ewan> is the version you beat the tutorial on public at all
21:34 < bridge> <Ewan> can i try it
21:35 < bridge> <robyt3> It's not public right now, you'd have to build it yourself for Emscripten and build the server with websockets
21:35 < bridge> <robyt3> The longest part is building the libraries for Emscripten
21:35 < bridge> <Ewan> is that just some emscripten & some flags
21:36 < bridge> <Ewan> nothing i haven't done before
21:36 < bridge> <robyt3> yeah, I don't use any additional local changes, master works to connect to a local websocket server at least
21:36 < bridge> <Solly (bun bun)> why do we have temp commands
21:36 < bridge> <Solly (bun bun)> `        if(pCommand->m_Flags & FlagMask && pCommand->m_Temp == Temp)`
21:36 < bridge> <Solly (bun bun)> if i remove this check it should work still
21:37 < bridge> <robyt3> Temp commands are those that the server sends
21:37 < bridge> <robyt3> They are deregistered when disconnecting
21:37 < bridge> <Solly (bun bun)> they are also marked as cfgflag_server
21:37 < bridge> <Solly (bun bun)> temp is only descriptive of their lifetime not their use
21:38 < bridge> <Ewan> how do you specify an emscripten build? override `CMAKE_SYSTEM_NAME`?
21:38 < bridge> <ryozuki> https://tenor.com/view/developers-gif-13292051
21:38 < bridge> <Ewan> true
21:38 < bridge> <Ewan> gm
21:38 < bridge> <Ewan> or w/e
21:38 < bridge> <robyt3> https://github.com/ddnet/ddnet?tab=readme-ov-file#cross-compiling-on-linux-to-webassembly-via-emscripten
21:38 < bridge> <Solly (bun bun)> temp is only descriptive of their lifetime not their use
21:38 < bridge> <Solly (bun bun)> (im removing the check, its annoying for me xd)
21:38 < bridge> <robyt3> It's mostly handled by the emsdk wrapper script
21:39 < bridge> <robyt3> First install https://emscripten.org/docs/getting_started/downloads.html (NOT via apt install)
21:40 < bridge> <robyt3> There are a basic server and html main file in https://github.com/ddnet/ddnet/tree/master/other/emscripten to test locally
21:40 < bridge> <Solly (bun bun)> that check's argument is given by `m_UseTempRconCommands` which is set at the same time as RconAuth
21:40 < bridge> <Ewan> me when i am on windows
21:40 < bridge> <robyt3> I don't know how feasible connecting to other servers is due to CORS
21:40 < bridge> <Ewan> that's ok hopefully the wifi card I ordered arrives today & i can try to connect to the network here again
21:40 < bridge> <robyt3> I used a Ubuntu VM
21:41 < bridge> <robyt3> Yeah, would be cool if you could at least try the Tutorial like this
21:41 < bridge> <Ewan> why did you need linux
21:41 < bridge> <Solly (bun bun)> do servers expose a websocket?
21:41 < bridge> <Solly (bun bun)> websockets always go through an http connection which can be marked with a no cors policy
21:41 < bridge> <Ewan> they dont
21:41 < bridge> <Ewan> they're initialized through an http connection
21:42 < bridge> <Ewan> then it's all websocket protocol
21:42 < bridge> <Ewan> i dont think cors poses a threat if it can be exposed through ddnet.org and they're playing on ddnet.org
21:42 < bridge> <Solly (bun bun)> <https://stackoverflow.com/questions/23674199/why-is-there-no-same-origin-policy-for-websockets-why-can-i-connect-to-ws-loc>
21:42 < bridge> <Solly (bun bun)> also browsers dont check
21:43 < bridge> <robyt3> It seems like when I try the client on https://localhost (with self-signed cert) it doesn't work because it also tries to establish the websocket connection with TLS
21:43 < bridge> <Solly (bun bun)> ah thats an issue
21:43 < bridge> <Ewan> then use ws:// instead
21:43 < bridge> <Solly (bun bun)> https:// isnt allowed to use ws://
21:43 < bridge> <Ewan> http:// is
21:43 < bridge> <Ewan> you don't actually have ssl on localhost
21:43 < bridge> <Solly (bun bun)> that means making the page http:// which is ehhhh
21:43 < bridge> <robyt3> You mean host the server on websocket? Do web browser support that?
21:44 < bridge> <Ewan> i mean
21:44 < bridge> <Ewan> ive been doing ws:// at work
21:44 < bridge> <Ewan> server's on http
21:44 < bridge> <Ewan> when local
21:44 < bridge> <Ewan> and then wss works for real deployed instances
21:44 < bridge> <robyt3> https => wss, http => ws
21:44 < bridge> <Ewan> yes
21:44 < bridge> <Solly (bun bun)> i just went to httpforever.com
21:44 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384982146036273152/image.png?ex=685468a3&is=68531723&hm=464aabc045cdb89ba45df374eb736c784e1ad4bc123826d3556e7447126cf3b8&
21:44 < bridge> <Solly (bun bun)> i am disapointed
21:45 < bridge> <Solly (bun bun)> idk why it redirected me, it works now
21:45 < bridge> <Ewan> :kek: 
21:45 < bridge> <Ewan> > Specify the target system: android, linux, window, webasm
21:45 < bridge> <Ewan> window
21:46 < bridge> <Ewan> im trying it on msys2 rn and i see no reason why it wouldn't work
21:46 < bridge> <Ewan> i'll let u know if i have trouble
21:46 < bridge> <Solly (bun bun)> ```cpp
21:46 < bridge> <Solly (bun bun)> else if((pPacket->m_Flags & NET_CHUNKFLAG_VITAL) != 0 && Msg == NETMSG_RCON_AUTH_STATUS)
21:46 < bridge> <Solly (bun bun)>         {
21:46 < bridge> <Solly (bun bun)>             int ResultInt = Unpacker.GetInt();
21:46 < bridge> <Solly (bun bun)>             if(!Unpacker.Error())
21:46 < bridge> <Solly (bun bun)>             {
21:46 < bridge> <Solly (bun bun)>                 m_aRconAuthed[Conn] = ResultInt;
21:46 < bridge> <Solly (bun bun)> 
21:46 < bridge> <Solly (bun bun)>                 if(m_aRconAuthed[Conn])
21:46 < bridge> <Solly (bun bun)>                     RconAuth(m_aRconUsername, m_aRconPassword, g_Config.m_ClDummy ^ 1);
21:46 < bridge> <Solly (bun bun)>             }
21:46 < bridge> <Solly (bun bun)>             if(Conn == CONN_MAIN)
21:46 < bridge> <Solly (bun bun)>             {
21:46 < bridge> <Solly (bun bun)>                 int Old = m_UseTempRconCommands;
21:46 < bridge> <Solly (bun bun)>                 m_UseTempRconCommands = Unpacker.GetInt();
21:46 < bridge> <Solly (bun bun)>                 if(Unpacker.Error())
21:46 < bridge> <Solly (bun bun)>                 {
21:46 < bridge> <Solly (bun bun)>                     m_UseTempRconCommands = 0;
21:46 < bridge> <Solly (bun bun)>                 }
21:47 < bridge> <Solly (bun bun)>                 if(Old != 0 && m_UseTempRconCommands == 0)
21:47 < bridge> <Solly (bun bun)>                 {
21:47 < bridge> <Solly (bun bun)>                     m_pConsole->DeregisterTempAll();
21:47 < bridge> <Solly (bun bun)>                     m_ExpectedRconCommands = -1;
21:47 < bridge> <Solly (bun bun)>                     m_vMaplistEntries.clear();
21:47 < bridge> <Solly (bun bun)>                     m_ExpectedMaplistEntries = -1;
21:47 < bridge> <Solly (bun bun)>                 }
21:47 < bridge> <Solly (bun bun)>             }
21:47 < bridge> <Solly (bun bun)>         }
21:47 < bridge> <Solly (bun bun)> ```
21:47 < bridge> <Solly (bun bun)> why are there 2 ints
21:47 < bridge> <Solly (bun bun)> surely if you are authed you should use temprconcommands
21:47 < bridge> <Solly (bun bun)> if there are no temprconcommands then fine, there are none
21:47 < bridge> <Solly (bun bun)> and you can specify not to use temprconcommands which would allow the server to send commands but autocomplete and help wouldnt work
21:47 < bridge> <Solly (bun bun)> i dont see the usecase
21:47 < bridge> <Ewan> solly unrelated, this is a potential issue; i guess i should've taken "outside of the source directory" more literally
21:47 < bridge> <Ewan> https://cdn.discordapp.com/attachments/293493549758939136/1384982861655970003/image.png?ex=6854694d&is=685317cd&hm=a28283f65d61d975a0fadf842c2cff4a4d84b96a3b782d55090fa71ddc7cd92a&
21:47 < bridge> <Ewan> i just made a subdirectory
21:47 < bridge> <robyt3> I've been meaning to rewrite this script for a while, it doesn't even work for other systems except android and webasm
21:47 < bridge> <Ewan> it's a little funny
21:48 < bridge> <robyt3> I have the build folder for the libraries inside the project folder like any other build folder
21:48 < bridge> <Ewan> oh but you run the script from the source folder
21:48 < bridge> <Ewan> hmm
21:48 < bridge> <robyt3> you run it from the project root, yeah
21:49 < bridge> <Ewan> i see the intention now, the script should just CD though because it's a subshell & it won't actually change dir for the user
21:49 < bridge> <Ewan> makes it much simpler too
21:55 < bridge> <Ewan> > ./cmake_lib_compile.sh: line 74: cd: build_webasm_wasm: No such file or directory
21:55 < bridge> <Ewan> what's that all about
21:55 < bridge> <Ewan> yurg
21:56 < bridge> <robyt3> weird, it should have created the build folder in the previous cmake call
21:57 < bridge> <Ewan> is it invoked via. emcmake
21:57 < bridge> <Ewan> that could be an issue
21:57 < bridge> <Ewan> i didn't have that in my path until just a second ago
21:58 < bridge> <robyt3> yeah, you need to `source ./emsdk_env.sh` in every terminal where you want to use the tools
21:58 < bridge> <Ewan> i dont have a file like that
21:58 < bridge> <robyt3> Should be part of https://emscripten.org/docs/getting_started/downloads.html
21:59 < bridge> <robyt3> Not sure why they list that path as an example, but I downloaded emsdk to my home folder
21:59 < bridge> <Ewan> msys2 doesn't seem to package that script
22:00 < bridge> <robyt3> You shouldn't install it from package manager I think
22:00 < bridge> <robyt3> On Ubuntu the version is outdated
22:01 < bridge> <robyt3> The website recommends cloning the current version from git
22:01 < bridge> <Ewan> im sure they do
22:08 < bridge> <Solly (bun bun)> its to filter out CFGFLAG_CHAT
22:08 < bridge> <Solly (bun bun)> which isnt done by the server
22:08 < bridge> <Solly (bun bun)> some of which isnt done by the server
22:08 < bridge> <Solly (bun bun)> oh my jeeeeez
22:10 < bridge> <Solly (bun bun)> so jank
22:14 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384989646710112267/image.png?ex=68546f9f&is=68531e1f&hm=9d74580206da8c1a58ac6eb1cde16971455af6666cd6b9eb910113144516272d&
22:14 < bridge> <Solly (bun bun)> why is tc in rcon cmdlist
22:14 < bridge> <Solly (bun bun)> im so fucking confused
22:20 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384991284355399700/image.png?ex=68547126&is=68531fa6&hm=5e1f3230e84631e0e7bca8e9735735de08050ea635c7a7dc2375e586c74d94b4&
22:20 < bridge> <Solly (bun bun)> AAAAAA
22:25 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384992520093569034/image.png?ex=6854724c&is=685320cc&hm=dc5033b44696ecd9b634576e7ca3f8b1cac6fe06b7fee0fe576f383c457c54d3&
22:25 < bridge> <Solly (bun bun)> WHERE DOES THIS COME FROM?
22:26 < bridge> <kaizdev_> Death protection is on close
22:26 < bridge> <Solly (bun bun)> https://cdn.discordapp.com/attachments/293493549758939136/1384992662074953889/image.png?ex=6854726e&is=685320ee&hm=dc38ed97c897825150cc1115892745dbdc6209ac970a19e96e64bc8ddf4506fa&
22:26 < bridge> <kaizdev_> solly
22:26 < bridge> <kaizdev_> bro
22:27 < bridge> <kaizdev_> Do you have a ddrace server?,
22:27 < bridge> <Solly (bun bun)> im going insane
22:27 < bridge> <Solly (bun bun)> no i dont
22:27 < bridge> <kaizdev_> creating ddnet server me.?
22:27 < bridge> <Solly (bun bun)> this is the same on all servers
22:27 < bridge> <Solly (bun bun)> if you are questioning the behaviour
22:27 < bridge> <kaizdev_> let's make a server together
22:27 < bridge> <Solly (bun bun)> like i am
22:27 < bridge> <kaizdev_> huh?
22:28 < bridge> <kaizdev_> solly
22:28 < bridge> <Solly (bun bun)> nty
22:29 < bridge> <Solly (bun bun)> vscode is fucking trolling
22:44 < bridge> <Ewan> config vars h or w/e
22:44 < bridge> <Ewan> there‚Äôs a flag for the macro to specify rcon
22:44 < bridge> <Ewan> it‚Äôs probably in there mistakenly
22:44 < bridge> <Solly (bun bun)> its so bad
22:44 < bridge> <Ewan> that‚Äôs also where the descriptions are
22:45 < bridge> <Solly (bun bun)> theres also 2 flags access level and command flags
22:45 < bridge> <Solly (bun bun)> which really should be passed as args always
22:45 < bridge> <Solly (bun bun)> and since its all thru virtual calls for no reason its really hard to find anything
22:45 < bridge> <Solly (bun bun)> ```cpp
22:45 < bridge> <Solly (bun bun)> void CConsole::ExecuteLineFlag(const char *pStr, int FlagMask, int ClientId, bool InterpretSemicolons)
22:45 < bridge> <Solly (bun bun)> {
22:45 < bridge> <Solly (bun bun)>     int Temp = m_FlagMask;
22:45 < bridge> <Solly (bun bun)>     m_FlagMask = FlagMask;
22:45 < bridge> <Solly (bun bun)>     ExecuteLine(pStr, ClientId, InterpretSemicolons);
22:45 < bridge> <Solly (bun bun)>     m_FlagMask = Temp;
22:45 < bridge> <Solly (bun bun)> }
22:45 < bridge> <Solly (bun bun)> ```
22:45 < bridge> <Solly (bun bun)> bruh
22:45 < bridge> <Solly (bun bun)> does the client parse rcon commands
22:51 < bridge> <Ewan> 100% skill issue
22:54 < bridge> <Solly (bun bun)> of the codebase sure
23:35 < bridge> <Ewan> virtual calls for no reason
23:35 < bridge> <Ewan> that is a skill issue
23:35 < bridge> <Ewan> it's not for no reason it's because teeworlds follows an interface/client model
23:35 < bridge> <Ewan> that really does work
