00:41 <@heinrich5991> deen: rationale?
00:41 <@heinrich5991> this might hide problems
00:47 < Shiki> hi, could someone enlighten me on how db connection works in ddnet server?
00:47 < Shiki> as I understand it, there's only one thread that runs for all the server activities, including communication with the db?
00:48 < Shiki> what happens if some queries take excessively long time?
01:16 <@heinrich5991> I believe the sql queries are done in a separate thread
01:16 <@heinrich5991> Shiki: ^
01:22 < Shiki> heinrich5991: hm, do you mean it's handled by mysql lib?
01:22 <@heinrich5991> no, by the ddnet code
01:23 <@heinrich5991> search for "thread" in src/game/server/score/sql_score.cpp
01:26 < Shiki> right, thanks!
08:46 <@deen> heinrich5991: rationale: GER has an overloaded disk, so players have severe lags every 5-10 minutes. this fixes the problem. I'd rather drop logs than make gameplay unbearable. if you have a better solution, go ahead
08:46 <@deen> and it's really annoying that we have 3 ddnet channels, so I have explain stuff in 3 locations^^
08:47 < Learath2> deen: why do we have 3 ddnet channels? and where are they?
08:47 <@deen> this one on irc, discord developer channel, skype group for ddnet admins
08:48 < Learath2> any reason why we don't have them all here?
08:48 <@deen> you have to be always connected in irc
08:49 <@deen> and many don't like/want to use irc
08:49 < Learath2> meh
08:50 < Learath2> skype and gentoo are proprietary garbage :(
08:50 <@deen> gentoo?
08:50 < Learath2> s/gentoo/discord/
08:50 <@deen> haha
08:50 < Learath2> i seem to have a typing disability today
09:00 < Learath2> get a fancy interface and you can even make a shitty hosted voice chat popular
09:00 < Learath2> sad where we have gotten
10:22 <@deen> the obvious solution would be to have a resizable array for the logging, but then the resizing itself could take long enough to get a noticable lag. and what if the disk stops working at all through a hardware failure? servers should keep running anyway
10:33 <@heinrich5991> maybe some warning: 1234567 missed log messages might be interesting
10:33 <@heinrich5991> or rather error:
10:34 <@deen> sure, but where to write the warning if logging doesn't work? :D
10:34 <@deen> but yeah, you could add that as the last message that still fits
10:35 <@heinrich5991> nah, better to make a counter I think
10:35 <@deen> yeah
10:36 <@deen> want to build it or should I?
10:39 <@heinrich5991> you could if you want :)
10:39 <@heinrich5991> currently coding something else
10:44 <@EastByte> we could also decrease the number of logs the server produces
10:44 <@deen> sure, we can do that additionally
10:44 <@EastByte> like alll the command logs 'used /pause'
10:45 <@deen> but 30 MB of logs for a day on GER doesn't seem like that much
10:45 <@heinrich5991> can you | sort | uniq them?
10:45 <@deen> then you have to get rid of time and other stuff first
10:47 <@heinrich5991> true
10:50 < ddnet-commits> [ddnet] def- pushed 1 new commit to master: https://git.io/v9fgp
10:50 < ddnet-commits> ddnet/master 63ca2f8 Dennis Felsing: Show nr of skipped log messages
10:56 <@deen> ok, got it
10:56 <@heinrich5991> thanks
10:57 <@deen> https://ddnet.tw/logsort.txt
10:58 <@EastByte> soo, what's the benefit of unifying a log? :p
10:59 <@deen> unifying?
10:59 <@EastByte> what sort -u or uniq does
10:59 <@deen> poor russsell had trouble with the noobfilter:
10:59 <@deen>     228 kill killer='11:russsell' victim='11:russsell' weapon=-2 special=0
11:00 <@heinrich5991> EastByte: seeing which log messages would benefit the most from being removed
11:00 <@EastByte> ah
11:00 <@deen> obviously "added option", "used"
11:00 <@heinrich5991> deen: wc -l of that log file?
11:01 <@deen> 69777
11:01 <@deen> ah, the entire log file?
11:02 <@deen> i thought you meant the resulting logsort.txt (full)
11:02 <@deen> not the cut off version i put online
11:02 <@deen> 231255 total
11:02 <@deen> 15% of lines are /pause^^
11:03 <@EastByte> sure^^
16:50 < davide> Hi to all, i have one question, if i want to use SQL for Records of maps, how i do? Thanks
18:39 <@deen> davide: well, you have to build a sql ddnet server binary
18:39 <@deen> and you need a mysql instance
18:40 <@deen> where you create a database, user, set them in ddnet config
19:13 < davide> Ok thanks
20:14 < ddnet-commits> [ddnet] def- pushed 1 new commit to master: https://git.io/v9JQh
20:14 < ddnet-commits> ddnet/master 9da2655 def: Add own time to /mapinfo
21:18 < Learath2> deen: i'd like to link together the discord #developer channel with here
21:18 < Learath2> so atleast we have those together :/
21:49 <@deen> sure
22:17 < dcord> <Learath2> o/
22:18 < dcord> <Ryozuki> hi @Learath2
22:18 < Ryozuki> maybe discord instead of dcord
22:18 < Learath2> was already taken
22:18 < Ryozuki> then d_iscord
22:19 < Henningstone> what about `ddnet-discord`?
22:19 < Ryozuki> that sounds better
22:19 < Learath2> well i'm fresh out of emails :P
22:19 < Learath2> ddiscord? :D
22:22 < Ryozuki> deen, how often is the "aw list of all DDNet ranks, team ranks and maps: CSV, SQL" updated?
22:26 <@deen> every night
22:26 < Ryozuki> ok, goof
22:26 < Ryozuki> good*
22:26 < ddnet-discord> <Savander> what is it? ðŸ˜®
22:27 < ddnet-discord> <Ryozuki> irc
22:27 < ddnet-discord> <Ryozuki> it's linked, what u say here is on irc also, and what we say on irc is also here
22:27 < ddnet-discord> <Savander> lol
22:27 < ddnet-discord> <Savander> Hi IRC!
22:27 < ddnet-discord> <Savander> I am savander!
22:27 < ddnet-discord> <Learath2> it's mostly so i don't have to be here ðŸ˜›
22:28 < ddnet-discord> <Savander> ðŸ˜®
22:28 < Ryozuki> woah emotes are also shown in irc lol
22:28 < Learath2> i don't have a font that has them :(
22:28 < ddnet-discord> <Ryozuki> ðŸ˜ª
22:28 < Learath2> well monospace and emotes wouldn't mix well
22:28 < Ryozuki> i use consolas 10
22:28 < Henningstone> it even does the colored nicknames thingy
22:28 < Ryozuki> yes
22:29 < ddnet-discord> <Savander> what with Github BOT?
22:29 < ddnet-discord> <Savander> will send message twice?
22:29 < ddnet-discord> <Savander> on irc and discord ?
22:29 < ddnet-discord> <Learath2> oh should get that to ignore somehow
22:29 < ddnet-discord> <Savander> ðŸ˜‰
22:29 < Learath2> will dig into the docs
22:30 < ddnet-discord> <Savander> maybe you can ignore bots
22:30 < ddnet-discord> <Savander> somehow ?
22:30 < Learath2> would it create an infinite loop maybe
22:30 < Learath2> that would be horrifying
22:30 < Ryozuki> funny
22:30 < ddnet-discord> <Savander> or just disable github on discord or irc
22:30 < Henningstone> let's try quickly before he figures out how to prevent it :D
22:33 < Learath2> doesn't seem to have an option for it :/
22:33 < Ryozuki> someone make a pr!
22:33 < Learath2> will need to patch it myself
22:33 < ddnet-discord> <Savander> test it first
22:33 < ddnet-discord> <Savander> ðŸ˜›
22:34 < Learath2> well it'll go atleast twice
22:35 < Learath2> bye @Savander, until i patch this anyways :P
22:35 < ddnet-discord> <Savander> bye ðŸ˜›
22:42  * Learath2 ran out of movies to watch
22:42 < Learath2> any suggestions?
22:48 <@heinrich5991> shouldn't create an infinite loop
22:48 <@heinrich5991> just display everything twice
22:51 < Learath2> yeah figured that out about a min ago
22:51 < Learath2> still would like to patch it before starting it back up
22:59 < Learath2> accidentally deleted some files thinking i commited them :(
23:00 < Learath2> forgot i never git add'd them :/
23:15 < davide> I have one another question, why after rejoin the time in statboard disappears?
23:21 <@deen> davide: you're using file based ranks instead of sql based ones
23:21 <@deen> and getting your rank out when you join the server is not implemented for them
