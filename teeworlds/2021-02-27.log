01:53 < bridge> [teeworlds] <jxsl13> refactor server logs, anyone :o?
08:55 < ChillerDragon> yikes
08:55 < ChillerDragon> any specific issues? @jxsl13
10:53 < bridge> [teeworlds] <gerdoe> eyes hurt without rainbow colours in it xd
11:01 < bridge> [teeworlds] <jxsl13> I would kind of prefer an event based approach. And still don't like the stability of extracting joining player's data from logs. [event] instead of [log level]. one might have some special event for debugging output, but it would basically be nice to differentiate based on the keyword that follows the timestamp. the meaning of the event would be more of l [what happened ingame]: here id the corresponding data.
11:01 < bridge> [teeworlds] <jxsl13> is
11:01 < bridge> [teeworlds] <jxsl13> -I
11:39 < ChillerDragon> sounds like a big refactor
11:40 < ChillerDragon> id be +1 for fixing the rare case of players joining with the name "(connecting)" in logs
11:42 < ChillerDragon> [game]: team_join player='2:(connecting)' team=0->1
11:42 < ChillerDragon> [server]: player has entered the game. ClientID=2 addr=XXX.XXX.XXX.XXX:44228
11:42 < ChillerDragon> [game]: team_join player='2:zyles' team=1
11:42 < ChillerDragon> especially in 0.7 i would love to assert on names changing so i can check the sanity of my script
11:43 < ChillerDragon> but that crases the script twice a year due to this edge case
11:44 < ChillerDragon> but refactoring that code to ensure it does not happen sounds like work too and maybe even introduces new bugs or complexity also testing if it works is tricky
11:45 < bridge> [teeworlds] <jxsl13> the logging of joining players is like the most unstable part imo currently.
11:45 < ChillerDragon> yea its tricky
11:46 < bridge> [teeworlds] <jxsl13> easiest fix would be to add a line wen a player completely joins, no connecting no unkonown nicks, but all data when the player joined in one single line
11:46 < bridge> [teeworlds] <jxsl13> when
11:48 < bridge> [teeworlds] <jxsl13> did you handle the case when a full server changes maps?
11:49 < bridge> [teeworlds] <jxsl13> it's possible to disconnect on map change, so imo on should mark players as disconnected and once they join as connected again.
11:49 < bridge> [teeworlds] <jxsl13> one should*
12:10 < ChillerDragon> its ctf5 only :D so i did not bother yet to support map changes
12:12 < bridge> [teeworlds] <jxsl13> welp
12:12 < bridge> [teeworlds] <jxsl13> keep this in tue back of your mind x)
12:12 < bridge> [teeworlds] <jxsl13> the
12:13 < ChillerDragon> my script probably would already crash if i change the gametype to dm :D
12:13 < ChillerDragon> yea a one liner for joining would be nice
12:14 < ChillerDragon> then name proably should be last to avoid parsing traps with funny player names such as "ClientID=3"
12:15 < bridge> [teeworlds] <jxsl13> that's not really a problem with greedy regex
12:15 < bridge> [teeworlds] <jxsl13> those nicknames
12:16 < bridge> [teeworlds] <Dune> I think the most important features of server logs is stability
12:16 < bridge> [teeworlds] <jxsl13> extracting the complete information of a joining player is not reliable.
12:16 < bridge> [teeworlds] <jxsl13> my biggest problem :'(
12:22 < bridge> [teeworlds] <jxsl13> adding a new parsable log line would not break backwards compatibility, but that's just a short term fix imo.
