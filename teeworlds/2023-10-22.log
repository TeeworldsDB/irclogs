15:08 < bridge> <blade67> Can someone explain this to me?
15:08 < bridge> <blade67> https://github.com/heinrich5991/libtw2/blob/master/doc/map.md#info
15:08 < bridge> <blade67> Are the optional properties fixed size? How do I know which prop got included?
15:15 < bridge> <robyt3> The author, version etc. properties are each an `int` that is the index of the data item containing the string, or `-1` if the value is unset. The length of these strings is only really limited in the editor to the lengths defined in the linked doc.
15:15 < bridge> <robyt3> > `opt` is the prefix for optional indices. They are either a normal index or `-1`, marking it as unused.
15:15 < bridge> <blade67> Oh!
15:16 < bridge> <robyt3> In valid maps at least. Invalid maps could also contains invalid indices like -3 or too large data indices
15:17 < bridge> <blade67> Interesting, would one want to parse those cases or just disregard the whole thing?
15:18 < bridge> <robyt3> It's much easier to discard the entire map when you find an error instead of trying to continue in your tool with whatever broken state the map is in
15:19 < bridge> <blade67> Makes sense, thank you!
15:22 < bridge> <blade67> Who thought it's a good idea to make sub types dependent on the parent's type property? ;;
15:23 < bridge> <chillerdragon> Are you building a map parser?
15:23 < bridge> <chillerdragon> Are you aware of patigas twmap library?
15:23 < bridge> <blade67> I am, I'd just like a fully native typescript implementation of everything documented in libtw2
15:24 < bridge> <chillerdragon> You can also ask patiga if he can get you ts bindings he did the same for python
15:24 < bridge> <chillerdragon> His project his pretty dope and well matured
15:25 < bridge> <chillerdragon> But not sure if he will do it or how much pain it is. If he won’t do it I guess it’s nice that you cover ts land
15:25 < bridge> <chillerdragon> Oh you aim for native too
15:25 < bridge> <chillerdragon> Ye then don’t mind my comment \:D
15:26 < bridge> <blade67> Oh, I saw his work. He helped me a lot in the past with similar stuff already. I'm just not sure what I want to do with this in the future. All I know for now is that I want to make a minimal server implementation
15:26 < bridge> <blade67> So I have to parse the map file at some point
15:26 < bridge> <chillerdragon> Do you also know swarfeys work?
15:26 < bridge> <chillerdragon> He did networking stuff in ts
15:27 < bridge> <blade67> I don't think I do? Do you have a link?
15:27 < bridge> <chillerdragon> GitLab swarfey
15:27 < bridge> <chillerdragon> gitlab.com/swarfey
15:28 < bridge> <blade67> Oh, yes, I've seen it before!
15:28 < bridge> <blade67> But its only the client
15:28 < bridge> <chillerdragon> https://gitlab.com/swarfey/teeworlds-client
15:28 < bridge> <blade67> Again, looking to implement the server. I believe it'll be much more useful than the client
15:28 < bridge> <chillerdragon> Yes I think his server stuff never got finished or started
15:28 < bridge> <chillerdragon> But net code is shared a lot
15:29 < bridge> <chillerdragon> Well depends both are cool Server and client
15:29 < bridge> <chillerdragon> But there for sure is a niche for server rewrites
15:29 < bridge> <blade67> I don't disagree that both are cool, but the flexibility of servers would make more sense imo
15:29 < bridge> <chillerdragon> The only actually useful one I know is the one in C#
15:29 < bridge> <blade67> https://github.com/Matodor/TeeSharp
15:29 < bridge> <blade67> This one?
15:29 < bridge> <chillerdragon> Yes
15:30 < bridge> <chillerdragon> It’s pretty epic
15:30 < bridge> <chillerdragon> I saw it in game he did a full on city mod in it
15:30 < bridge> <blade67> Yeah, it's a cool project. Unfortunately my C/++
15:30 < bridge> <blade67> # isn't great
15:30 < bridge> <blade67> I mean, city mods aren't really special imo
15:32 < bridge> <chillerdragon> Are you planning to go open source?
15:32 < bridge> <chillerdragon> Show me any other server rewrite that can even be actually played on mod or not
15:33 < bridge> <chillerdragon> Also it’s a cool city mod. And it dependens on what you put in the city mod
15:33 < bridge> <blade67> That's fair. I guess I've never been a big city player.
15:33 < bridge> <blade67> I do plan to go open source at some point, when it's functional
15:36 < bridge> <chillerdragon> If your project has a public repo share it I’ll be your first fan and Follower
15:37 < bridge> <blade67> Haha, thanks! I haven't made a repo yet tho. Like I said, I want to have *something* work first
15:43 < bridge> <blade67> Silly question tho. Are datafiles only used in maps? Kind of like a container?
15:44 < bridge> <blade67> I assume so, right?
16:03 < bridge> <robyt3> yeah, I assume it was made as a generic container format but in the end on maps use the datafile format
16:06 < bridge> <robyt3> only*
16:08 < bridge> <blade67> One thing I also don't quite understand is why in the version header, the magic key can be inverse of what it should be
16:10 < bridge> <blade67> ie. ATAD instead of DATA
16:46 < bridge> <robyt3> https://github.com/heinrich5991/libtw2/blob/master/doc/datafile.md
16:46 < bridge> <robyt3> > NOTE: Readers of Teeworlds datafiles should be able to read datafiles which start with a reversed magic too, that is 'A', 'T', 'A', 'D'. A bug in the reference implementation caused big-endian machines to save the reversed magic bytes.
16:48 < bridge> <blade67> I get that, I just don't understand why they would just go with it instead of fixing it
16:49 < bridge> <robyt3> It's so existing maps that were written incorrect can still be read
16:51 < bridge> <blade67> oof
17:20 < bridge> <patiga> @blade67 in heinrich5991's entire map collection I think there were less than 3 maps with that bug, maybe it was zero maps in total
17:21 < bridge> <blade67> Yeaah, so I won't worry about it
17:50 < bridge> <blade67> Silly question but can you even see map info? Like, is there a way to see it?
18:00 < bridge> <blade67> And while I'm at it, does this look right to you guys?
18:00 < bridge> <blade67> ```
18:00 < bridge> <blade67> "type_id__id": {
18:00 < bridge> <blade67>     "type_id": 15,
18:00 < bridge> <blade67>     "id": 0
18:00 < bridge> <blade67> },
18:00 < bridge> <blade67> "size": 4194304,
18:00 < bridge> <blade67> ```
18:09 < bridge> <robyt3> You can only see the map info in the editor (file menu > map details)
18:18 < bridge> <blade67> I must have missed that
18:19 < bridge> <blade67> Nope, it's not there for me
18:23 < ChillerDragon> try save as -> map details
18:24 < bridge> <robyt3> Ah, yes, it was moved in DDNet client
18:24 < ChillerDragon> brainased robsti
18:24 < bridge> <robyt3> In Teeworlds client it's in the save dialog
18:24 < ChillerDragon> ddnet maximalist
18:30 < bridge> <blade67> Seems to always be empty for me, on all the maps I test. Which admittedly weren't many
18:30 < bridge> <robyt3> yeah, probably not used very much if it's not shown anywhere in the client
18:32 < bridge> <blade67> Mhh, oh well
